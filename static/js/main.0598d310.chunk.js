(this.webpackJsonparmobv2=this.webpackJsonparmobv2||[]).push([[0],{166:function(e,n,t){"use strict";t.r(n);var a=t(3),r=t(0),o=t.n(r),c=t(34),i=t.n(c),s=(t(97),t(25)),l=t(16),d=t(172),u=t(169),f=t(168),j=t(173),b=t(10),p=t.n(b),h=t(22),x=t(31),O=t(91),w=t(170),v=t(6),g=t(40),y=t(85),k=t.n(y),m=function(){var e=Object(x.a)(p.a.mark((function e(n){var t,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.a.init({host:"arweave.net",port:443}),e.next=3,t.wallets.jwkToAddress(n);case 3:return a=e.sent,e.t0=t.ar,e.next=7,t.wallets.getBalance(a);case 7:return e.t1=e.sent,r=e.t0.winstonToAr.call(e.t0,e.t1),console.log(a),console.log(r),e.abrupt("return",{address:a,balance:r});case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),A={key:{},balance:"",address:""},S=Object(r.createContext)({state:A,dispatch:function(){return null}}),E=function(){var e=Object(w.a)(),n=o.a.useContext(S),t=n.state,r=n.dispatch;o.a.useEffect((function(){var e=function(){var e=Object(x.a)(p.a.mark((function e(n){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(n),console.log(JSON.parse(n)),e.next=4,m(t);case 4:a=e.sent,r({type:"ADD_WALLET",payload:Object(h.a)(Object(h.a)({},a),{},{key:t})});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();Object(g.b)("wallet").then((function(n){if(n)try{e(n)}catch(t){console.log("Error loading wallet",t)}}))}),[]);var c=function(){var n=Object(x.a)(p.a.mark((function n(t){var a;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(a=new FileReader).onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading has failed")},a.onload=function(){var n=Object(x.a)(p.a.mark((function n(a){var o,c;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("application/json"!==t[0].type){n.next=17;break}return n.prev=1,o=JSON.parse(a.target.result),n.next=5,m(o);case 5:return c=n.sent,n.next=8,Object(g.c)("wallet",JSON.stringify(o));case 8:r({type:"ADD_WALLET",payload:Object(h.a)(Object(h.a)({},c),{},{key:o})}),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),console.log("Invalid json in wallet file"),e({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid JSON in wallet file"});case 15:n.next=19;break;case 17:console.log("Invalid file type"),e({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid file type"});case 19:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}();try{a.readAsText(t[0])}catch(o){console.log("Invalid file type"),e({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid file type"})}case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(a.jsx)(v.a,{children:""===t.address?Object(a.jsx)(v.a,{w:"100%",borderStyle:"dashed",borderWidth:"2px",children:Object(a.jsx)(O.a,{onDrop:c,children:function(e){var n=e.getRootProps,t=e.getInputProps;return Object(a.jsx)("section",{children:Object(a.jsxs)("div",Object(h.a)(Object(h.a)({},n()),{},{children:[Object(a.jsx)("input",Object(h.a)({},t())),Object(a.jsx)(v.a,{flexDirection:"row",padding:3,children:Object(a.jsx)(f.a,{fontSize:14,textAlign:"center",children:"Drop a wallet file or click to load wallet"})})]}))})}})}):Object(a.jsxs)(u.a,{isInline:!0,children:[Object(a.jsx)(f.a,{children:t.address}),Object(a.jsxs)(f.a,{children:[parseFloat(t.balance).toFixed(4).toLocaleString()," AR"]})]})})},W=function(e,n){switch(console.log("Current state is:",e),console.log("Action requested is:",n),n.type){case"ADD_WALLET":return Object(h.a)(Object(h.a)({},e),{},{key:n.payload.key,balance:n.payload.balance,address:n.payload.address});default:return e}},L=t(90),I=t.n(L),D=function(){var e=o.a.useContext(S).state,n=o.a.useState([]),t=Object(s.a)(n,2),r=t[0],c=t[1];return console.log(e.address),o.a.useEffect((function(){I.a.post("https://arweave.net/graphql",{query:'query {\n                transactions(owners:  ["'.concat(e.address,'"]) {\n                  edges {\n                    node {\n                      id\n                      owner {\n                        address\n                      }\n                      recipient\n                      tags {\n                        name\n                        value\n                      }\n                      fee {\n                        winston\n                        ar\n                      }\n                      quantity {\n                        winston\n                        ar\n                      }\n                    }\n                  }\n                }\n              }')}).then((function(e){console.log(e.data),c(e.data.data.transactions.edges)})).catch((function(e){return console.log(e)}))}),[]),Object(a.jsx)(v.a,{children:r.length>0?r.map((function(e){return function(e){return Object(a.jsxs)(u.a,{isInline:!0,children:[Object(a.jsxs)(f.a,{children:["ID: ",e.node.id]}),Object(a.jsxs)(f.a,{children:["Owner: ",e.node.owner.address]})]})}(e)})):null})},C=t(49),T=t(55),F=t(171),R=function(){var e=o.a.useContext(S),n=e.state,t=e.dispatch;return Object(a.jsxs)(u.a,{isInline:!0,position:"fixed",bottom:"40px",right:"0px",align:"center",children:[Object(a.jsx)(f.a,{fontSize:11,children:""===n.address?"Open Wallet":"Close Wallet"}),Object(a.jsx)(F.a,{"aria-label":"wallet",icon:C.c,isRound:!0,onClick:Object(x.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===n.address){e.next=4;break}return e.next=3,Object(g.a)("wallet");case 3:t({type:"ADD_WALLET",payload:{address:"",balance:"",key:""}});case 4:case"end":return e.stop()}}),e)})))})]},"me")},B=function(){var e,n=o.a.useState(!1),t=Object(s.a)(n,2),r=t[0],c=t[1],i=o.a.useRef(null);return e=i,o.a.useEffect((function(){function n(n){e.current&&!e.current.contains(n.target)&&c(!1)}return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[e]),Object(a.jsxs)("div",{ref:i,style:{position:"fixed",bottom:"20px",right:"20px"},children:[Object(a.jsx)(F.a,{"aria-label":"open",isRound:!0,icon:r?C.a:C.b,onClick:function(){return c(!r)}}),Object(a.jsx)(T.a,{children:r&&Object(a.jsx)(T.b.div,{initial:{opacity:0},animate:{y:-20,opacity:1},exit:{y:20,opacity:0},children:Object(a.jsx)(R,{})})})]})};var J=function(){var e=o.a.useReducer(W,A),n=Object(s.a)(e,2),t=n[0],r=n[1];return Object(a.jsx)(S.Provider,{value:{dispatch:r,state:t},children:Object(a.jsxs)(l.a,{theme:d.a,children:[Object(a.jsxs)(u.a,{w:"100%",align:"center",children:[Object(a.jsxs)(u.a,{isInline:!0,children:[Object(a.jsx)(f.a,{children:"Armob V2"}),""!==t.balance&&Object(a.jsxs)(f.a,{justifySelf:"end",children:["Balance: ",t.balance]})]}),Object(a.jsxs)(j.f,{isFitted:!0,align:"center",children:[Object(a.jsxs)(j.e,{children:[Object(a.jsx)(j.d,{children:""===t.address?Object(a.jsx)(E,{}):Object(a.jsx)(D,{})}),Object(a.jsx)(j.d,{children:Object(a.jsx)(f.a,{children:"Browser"})})]}),Object(a.jsxs)(j.c,{position:"fixed",bottom:"0px",left:"0px",w:"100vw",children:[Object(a.jsx)(j.a,{children:"Wallet"}),Object(a.jsx)(j.a,{children:"Browser"})]})]})]}),Object(a.jsx)(B,{})]})})},N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var q=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,174)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,o=n.getLCP,c=n.getTTFB;t(e),a(e),r(e),o(e),c(e)}))};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(J,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat(".","/service-worker.js");N?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):P(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):P(n,e)}))}}(),q()},97:function(e,n,t){}},[[166,1,2]]]);
//# sourceMappingURL=main.0598d310.chunk.js.map