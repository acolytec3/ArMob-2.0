(this.webpackJsonparmobv2=this.webpackJsonparmobv2||[]).push([[0],{128:function(e,t,n){},211:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0),c=n.n(r),s=n(35),o=n.n(s),i=(n(128),n(14)),l=n(221),d=n(224),u=n(15),j=n(223),b=n(217),p=n(219),x=n(228),f=n(5),h=n(9),O=n.n(h),g=n(31),v=n(36),w=n(121),m=n(222),y=n(122),k=n(218),C=n(225),S=n(78),A=n(49),T=n(26),D=n(76),W=n.n(D),E=n(50),L=n.n(E),q=n(113),I=function(){var e=Object(v.a)(O.a.mark((function e(t){var n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=W.a.init({host:"arweave.net",port:443}),a="","string"!==typeof t){e.next=6;break}a=t,e.next=9;break;case 6:return e.next=8,n.wallets.jwkToAddress(t);case 8:a=e.sent;case 9:return e.t0=n.ar,e.next=12,n.wallets.getBalance(a);case 12:return e.t1=e.sent,r=e.t0.winstonToAr.call(e.t0,e.t1),console.log(a),console.log(r),e.abrupt("return",{address:a,balance:r});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(v.a)(O.a.mark((function e(t){var n,a,r,c,s,o,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=W.a.init({host:"arweave.net",port:443}),e.next=3,L.a.post("https://arweave.net/graphql",{query:'query {\n      transactions(first:20,\n          owners:["'.concat(t,'"],\n          tags: [{\n              name: "Exchange",\n            values:["Verto"]\n          }, {name:"Type", values:["Buy", "Sell"]}]\n      ) {\n          edges {\n              node {\n                  id\n                  tags {\n                    name\n                    value\n                  }\n              }\n          }\n      }\n  }')});case 3:return a=e.sent,r=a.data.data.transactions.edges,c=r.map((function(e){return e.node.tags.filter((function(e){return"Token"===e.name}))[0].value})),e.next=8,L.a.post("https://arweave.net:443/graphql",{query:'query {\n      transactions(first:20,\n        \towners:["'.concat(t,'"]\n          tags: [{\n              name: "App-Name",\n            values:["SmartWeaveAction"]\n          }]\n      ) {\n          edges {\n              node {\n                  id\n                  tags {\n                    name\n                    value\n                  }\n              }\n          }\n      }\n  }')});case 8:return a=e.sent,console.log("Verto contract interactions",c),s=a.data.data.transactions.edges.map((function(e){return e.node.tags.filter((function(e){return"Contract"===e.name}))[0].value})),console.log("Generic Smartweave contract interactions",s),o=Object(T.a)(new Set(c.concat(s))),e.next=15,Promise.all(o.map((function(e){return Object(q.readContract)(n,e).then((function(e){if(e.balances)return{balance:e.balances[t],ticker:e.ticker}}))})));case 15:return i=e.sent,e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F={key:{},balance:"",address:""},R=Object(r.createContext)({state:F,dispatch:function(){return null}}),z=function(e){var t=Object(m.a)(),n=c.a.useContext(R),r=(n.state,n.dispatch),s=c.a.useState(!1),o=Object(i.a)(s,2),l=o[0],d=o[1],u=c.a.useState(""),j=Object(i.a)(u,2),p=j[0],x=j[1],h=function(){var n=Object(v.a)(O.a.mark((function n(a){var c;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(c=new FileReader).onabort=function(){return console.log("file reading was aborted")},c.onerror=function(){return console.log("file reading has failed")},c.onload=function(){var n=Object(v.a)(O.a.mark((function n(c){var s,o,i;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(d(!0),"application/json"!==a[0].type){n.next=22;break}return n.prev=2,s=JSON.parse(c.target.result),n.next=6,I(s);case 6:return o=n.sent,n.next=9,B(o.address);case 9:return i=n.sent,n.next=12,Object(A.b)("wallet",JSON.stringify(s));case 12:e.onClose(),r({type:"ADD_WALLET",payload:Object(g.a)(Object(g.a)({},o),{},{key:s,tokens:i})}),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(2),console.log("Invalid json in wallet file"),t({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid JSON in wallet file"});case 20:n.next=24;break;case 22:console.log("Invalid file type"),t({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid file type"});case 24:d(!1);case 25:case"end":return n.stop()}}),n,null,[[2,16]])})));return function(e){return n.apply(this,arguments)}}();try{c.readAsText(a[0])}catch(s){console.log("Invalid file type"),t({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid file type"})}case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),T=function(){var t=Object(v.a)(O.a.mark((function t(){var n,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.next=3,I(p);case 3:return n=t.sent,t.next=6,B(p);case 6:return a=t.sent,t.next=9,Object(A.b)("wallet",p);case 9:e.onClose(),r({type:"ADD_WALLET",payload:Object(g.a)(Object(g.a)({},n),{},{key:"",tokens:a})});case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)(b.a,{align:"center",children:[l?Object(a.jsx)(y.a,{}):Object(a.jsx)(f.a,{w:"100%",borderStyle:"dashed",borderWidth:"2px",children:Object(a.jsx)(w.a,{onDrop:h,children:function(e){var t=e.getRootProps,n=e.getInputProps;return Object(a.jsx)("section",{children:Object(a.jsxs)("div",Object(g.a)(Object(g.a)({},t()),{},{children:[Object(a.jsx)("input",Object(g.a)({},n())),Object(a.jsx)(f.a,{flexDirection:"row",padding:3,children:Object(a.jsx)(k.a,{fontSize:14,textAlign:"center",children:"Drop a wallet file or click to load wallet"})})]}))})}})}),!l&&Object(a.jsxs)(b.a,{w:"100%",children:[Object(a.jsx)(C.a,{w:"93%%",placeholder:"Wallet address",onChange:function(e){x(e.target.value)}}),Object(a.jsx)(S.a,{isDisabled:""===p,onClick:function(){return T()},children:"Track Address"})]})]})},P=function(e,t){switch(console.log("Current state is:",e),console.log("Action requested is:",t),t.type){case"ADD_WALLET":var n,a=null===(n=e.wallets)||void 0===n?void 0:n.filter((function(e){return e.address===t.payload.address})),r=e.wallets;return a&&0===a.length&&(null===r||void 0===r||r.push({address:t.payload.address,key:t.payload.key})),Object(g.a)(Object(g.a)({},e),{},{key:t.payload.key,balance:t.payload.balance,address:t.payload.address,tokens:t.payload.tokens,wallets:r});default:return e}},J=n(227),N=n(226),_=function(){var e=c.a.useContext(R).state,t=c.a.useState([]),n=Object(i.a)(t,2),r=n[0],s=n[1];return console.log(e.address),c.a.useEffect((function(){L.a.post("https://arweave.net/graphql",{query:'query {\n                transactions(owners:  ["'.concat(e.address,'"]) {\n                  edges {\n                    node {\n                      id\n                      owner {\n                        address\n                      }\n                      recipient\n                      tags {\n                        name\n                        value\n                      }\n                      fee {\n                        winston\n                        ar\n                      }\n                      quantity {\n                        winston\n                        ar\n                      }\n                    }\n                  }\n                }\n              }')}).then((function(e){console.log(e.data),s(e.data.data.transactions.edges)})).catch((function(e){return console.log(e)}))}),[]),Object(a.jsx)(f.a,{children:e.address&&Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(p.a,{size:"sm",children:"Transactions"}),Object(a.jsx)(J.a,{allowToggle:!0,w:"100%",children:r.length>0?r.map((function(e){return function(e){return Object(a.jsxs)(J.d,{children:[Object(a.jsxs)(J.b,{children:[Object(a.jsxs)(k.a,{children:["ID: ",e.node.id]}),Object(a.jsx)(J.c,{})]}),Object(a.jsx)(J.e,{children:e.node.tags.map((function(e){return Object(a.jsxs)(N.a,{columns:2,children:[Object(a.jsx)(k.a,{fontSize:10,children:e.name}),Object(a.jsx)(k.a,{fontSize:10,children:e.value})]})}))})]})}(e)})):null})]})})},M=n(65),V=n(77),G=n(220),$=function(e){var t,n=c.a.useState(!1),r=Object(i.a)(n,2),s=r[0],o=r[1],l=c.a.useRef(null),d=function(){var t=c.a.useContext(R),n=t.state,r=t.dispatch;return Object(a.jsxs)(b.a,{isInline:!0,position:"fixed",bottom:"40px",right:"0px",align:"center",children:[Object(a.jsx)(k.a,{fontSize:11,children:""===n.address?"Open Wallet":"Close Wallet"}),Object(a.jsx)(G.a,{"aria-label":"wallet",icon:M.c,isRound:!0,onClick:Object(v.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===n.address){t.next=6;break}return t.next=3,Object(A.a)("wallet");case 3:r({type:"ADD_WALLET",payload:{address:"",balance:"",key:""}}),t.next=7;break;case 6:e.onOpen();case 7:o(!1);case 8:case"end":return t.stop()}}),t)})))})]},"me")};return t=l,c.a.useEffect((function(){function e(e){t.current&&!t.current.contains(e.target)&&o(!1)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]),Object(a.jsxs)("div",{ref:l,style:{position:"fixed",bottom:"20px",right:"20px"},children:[Object(a.jsx)(G.a,{"aria-label":"open",isRound:!0,icon:s?M.a:M.b,onClick:function(){return o(!s)}}),Object(a.jsx)(V.a,{children:s&&Object(a.jsx)(V.b.div,{initial:{opacity:0},animate:{y:-20,opacity:1},exit:{y:20,opacity:0},children:Object(a.jsx)(d,{})})})]})},H=function(){var e=c.a.useContext(R).state;return Object(a.jsxs)(f.a,{children:[Object(a.jsx)(p.a,{size:"sm",children:"Wallet Balances"}),Object(a.jsxs)(N.a,{columns:2,children:[Object(a.jsx)(k.a,{children:"Ticker"}),Object(a.jsx)(k.a,{children:"Balance"}),Object(a.jsx)(k.a,{children:"AR"}),Object(a.jsx)(k.a,{children:e.balance})]}),e.tokens.map((function(e){return Object(a.jsxs)(N.a,{columns:2,children:[Object(a.jsx)(k.a,{children:e.ticker}),Object(a.jsx)(k.a,{children:e.balance})]})}))]})};var K=function(){var e=c.a.useReducer(P,F),t=Object(i.a)(e,2),n=t[0],r=t[1],s=c.a.useState(!1),o=Object(i.a)(s,2),h=(o[0],o[1],Object(l.a)()),O=h.isOpen,g=h.onOpen,v=h.onClose,w=function(){return Object(a.jsxs)(d.a,{isCentered:!0,isOpen:O,onClose:v,children:[Object(a.jsx)(d.g,{}),Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.f,{children:"Load Wallet"}),Object(a.jsx)(d.c,{}),Object(a.jsx)(d.b,{children:Object(a.jsx)(z,{onClose:v})}),Object(a.jsx)(d.e,{})]})]})};return Object(a.jsx)(R.Provider,{value:{dispatch:r,state:n},children:Object(a.jsxs)(u.a,{theme:j.a,children:[Object(a.jsxs)(b.a,{w:"100%",align:"center",children:[Object(a.jsx)(p.a,{children:"ArMob 2.0"}),Object(a.jsxs)(x.f,{isFitted:!0,align:"center",children:[Object(a.jsxs)(x.e,{children:[Object(a.jsx)(x.d,{children:""!==n.address&&Object(a.jsx)(f.a,{children:n.tokens&&n.tokens.length>0&&Object(a.jsx)(H,{})})}),Object(a.jsx)(x.d,{children:Object(a.jsx)(_,{})})]}),Object(a.jsxs)(x.c,{position:"fixed",bottom:"0px",left:"0px",w:"100vw",children:[Object(a.jsx)(x.a,{children:"Wallet"}),Object(a.jsx)(x.a,{children:"Transactions"})]})]})]}),Object(a.jsx)($,{onOpen:g}),Object(a.jsx)(w,{})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,229)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(K,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Q()}},[[211,1,2]]]);
//# sourceMappingURL=main.736f30fd.chunk.js.map