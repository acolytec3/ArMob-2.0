(this.webpackJsonparmobv2=this.webpackJsonparmobv2||[]).push([[0],{163:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0),o=n.n(r),c=n(31),i=n.n(c),s=(n(94),n(23)),l=n(15),d=n(169),u=n(166),j=n(165),f=n(170),b=n(10),p=n.n(b),h=n(20),x=n(35),g=n(88),w=n(167),O=n(6),v=n(82),y=n.n(v),m=function(){var e=Object(x.a)(p.a.mark((function e(t){var n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.a.init({host:"arweave.net",port:443}),e.next=3,n.wallets.jwkToAddress(t);case 3:return a=e.sent,e.t0=n.ar,e.next=7,n.wallets.getBalance(a);case 7:return e.t1=e.sent,r=e.t0.winstonToAr.call(e.t0,e.t1),console.log(a),console.log(r),e.abrupt("return",{address:a,balance:r});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k={key:{},balance:"",address:""},S=Object(r.createContext)({state:k,dispatch:function(){return null}}),A=function(){var e=Object(w.a)(),t=o.a.useContext(S),n=t.state,r=t.dispatch;o.a.useEffect((function(){var e=function(){var e=Object(x.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(t),console.log(JSON.parse(t)),e.next=4,m(n);case 4:a=e.sent,r({type:"ADD_WALLET",payload:Object(h.a)(Object(h.a)({},a),{},{key:n})});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=localStorage.getItem("wallet");if(t)try{e(t)}catch(n){console.log("Error loading wallet",n)}}),[]);var c=function(){var t=Object(x.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new FileReader).onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading has failed")},a.onload=function(){var t=Object(x.a)(p.a.mark((function t(a){var o,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("application/json"!==n[0].type){t.next=16;break}return t.prev=1,o=JSON.parse(a.target.result),t.next=5,m(o);case 5:c=t.sent,localStorage.setItem("wallet",JSON.stringify(o)),r({type:"ADD_WALLET",payload:Object(h.a)(Object(h.a)({},c),{},{key:o})}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log("Invalid json in wallet file"),e({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid JSON in wallet file"});case 14:t.next=18;break;case 16:console.log("Invalid file type"),e({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid file type"});case 18:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();try{a.readAsText(n[0])}catch(o){console.log("Invalid file type"),e({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid file type"})}case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsx)(O.a,{children:""===n.address?Object(a.jsx)(O.a,{w:"100%",borderStyle:"dashed",borderWidth:"2px",children:Object(a.jsx)(g.a,{onDrop:c,children:function(e){var t=e.getRootProps,n=e.getInputProps;return Object(a.jsx)("section",{children:Object(a.jsxs)("div",Object(h.a)(Object(h.a)({},t()),{},{children:[Object(a.jsx)("input",Object(h.a)({},n())),Object(a.jsx)(O.a,{flexDirection:"row",padding:3,children:Object(a.jsx)(j.a,{fontSize:14,textAlign:"center",children:"Drop a wallet file or click to load wallet"})})]}))})}})}):Object(a.jsxs)(u.a,{isInline:!0,children:[Object(a.jsx)(j.a,{children:n.address}),Object(a.jsxs)(j.a,{children:[parseFloat(n.balance).toFixed(4).toLocaleString()," AR"]})]})})},I=function(e,t){switch(console.log("Current state is:",e),console.log("Action requested is:",t),t.type){case"ADD_WALLET":return Object(h.a)(Object(h.a)({},e),{},{key:t.payload.key,balance:t.payload.balance,address:t.payload.address});default:return e}},T=n(87),W=n.n(T),E=function(){var e=o.a.useContext(S),t=e.state,n=(e.dispatch,o.a.useState([])),r=Object(s.a)(n,2),c=r[0],i=r[1];return console.log(t.address),o.a.useEffect((function(){W.a.post("https://arweave.net/graphql",{query:'query {\n                transactions(owners:  ["'.concat(t.address,'"]) {\n                  edges {\n                    node {\n                      id\n                      owner {\n                        address\n                      }\n                      recipient\n                      tags {\n                        name\n                        value\n                      }\n                      fee {\n                        winston\n                        ar\n                      }\n                      quantity {\n                        winston\n                        ar\n                      }\n                    }\n                  }\n                }\n              }')}).then((function(e){console.log(e.data),i(e.data.data.transactions.edges)})).catch((function(e){return console.log(e)}))}),[]),Object(a.jsx)(O.a,{children:c.length>0?c.map((function(e){return function(e){return Object(a.jsxs)(u.a,{isInline:!0,children:[Object(a.jsxs)(j.a,{children:["ID: ",e.node.id]}),Object(a.jsxs)(j.a,{children:["Owner: ",e.node.owner.address]})]})}(e)})):null})},D=n(46),L=n(52),C=n(168),F=L.b.custom(C.a),B=function(){var e=o.a.useState(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(w.a)();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(C.a,{"aria-label":"open",isRound:!0,icon:n?D.a:D.b,position:"fixed",bottom:"20px",right:"20px",onClick:function(){return r(!n)}}),Object(a.jsx)(L.a,{children:n&&Object(a.jsx)(F,{"aria-label":"wallet",isRound:!0,icon:D.c,initial:{y:20,opacity:0},animate:{y:-20,opacity:1},exit:{y:20,opacity:0},position:"fixed",bottom:"60px",right:"20px",onClick:function(){c({title:"This will do something with wallets eventually",status:"info",duration:3e3,position:"bottom-left"})}},"me")})]})};var J=function(){var e=o.a.useReducer(I,k),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(a.jsx)(S.Provider,{value:{dispatch:r,state:n},children:Object(a.jsxs)(l.a,{theme:d.a,children:[Object(a.jsxs)(u.a,{align:"center",children:[Object(a.jsxs)(u.a,{isInline:!0,children:[Object(a.jsx)(j.a,{children:"Armob V2"}),""!==n.balance&&Object(a.jsxs)(j.a,{justifySelf:"end",children:["Balance: ",n.balance]})]}),Object(a.jsxs)(f.f,{isFitted:!0,align:"center",children:[Object(a.jsxs)(f.e,{children:[Object(a.jsx)(f.d,{children:""===n.address?Object(a.jsx)(A,{}):Object(a.jsx)(E,{})}),Object(a.jsx)(f.d,{children:Object(a.jsx)(j.a,{children:"Transactions"})}),Object(a.jsx)(f.d,{children:Object(a.jsx)(j.a,{children:"Browser"})})]}),Object(a.jsxs)(f.c,{position:"fixed",bottom:"0px",left:"0px",w:"100vw",children:[Object(a.jsx)(f.a,{children:"Wallet"}),Object(a.jsx)(f.a,{children:"Transactions"}),Object(a.jsx)(f.a,{children:"Browser"})]})]})]}),Object(a.jsx)(B,{})]})})},N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,171)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(J,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");N?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):P(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):P(t,e)}))}}(),R()},94:function(e,t,n){}},[[163,1,2]]]);
//# sourceMappingURL=main.a0e5a183.chunk.js.map