(this.webpackJsonparmobv2=this.webpackJsonparmobv2||[]).push([[0],{207:function(e,t){},225:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(624),t)},304:function(e,t){},308:function(e,t){},343:function(e,t){},347:function(e,t){},420:function(e,t,n){},494:function(e,t){},496:function(e,t){},507:function(e,t){},509:function(e,t){},531:function(e,t){},624:function(e,t,n){"use strict";var r=n(3),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,c){function s(e){try{o(r.next(e))}catch(t){c(t)}}function i(e){try{o(r.throw(e))}catch(t){c(t)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}o((r=r.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyFromMnemonic=t.generateMnemonic=void 0;var s=n(791),i=c(n(703));t.generateMnemonic=function(){return a(this,void 0,void 0,r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.generateKeyPair("rsa",{id:"rsa",modulusLength:4096},{privateKeyFormat:"pkcs1-pem"});case 2:return e.abrupt("return",e.sent.mnemonic);case 3:case"end":return e.stop()}}),e)})))},t.getKeyFromMnemonic=function(e){return a(this,void 0,void 0,r.mark((function t(){var n,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.getKeyPairFromMnemonic(e,"rsa",{id:"rsa",modulusLength:4096},{privateKeyFormat:"pkcs1-pem"});case 2:return n=t.sent,t.next=5,i.default.keys.import(n.privateKey,"");case 5:return delete(a=t.sent._key).alg,delete a.key_ops,t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})))}},647:function(e,t){},774:function(e,t){},792:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(1),c=n.n(a),s=n(87),i=n.n(s),o=(n(420),n(4)),u=n(834),l=n(158),d=n(806),f=n(811),b=n(833),p=n(809),j=n(819),x=n(73),h=n(49),v=n(160),m=n.n(v),O=(n(421),n(72)),g=n(807),k=n(808),y=n(403),w={key:null,balance:"",address:"",tokens:[],tokenAddresses:[],wallets:[]},S=Object(a.createContext)({state:w,dispatch:function(){return null}}),T=n(367),C=function(e){var t=e.isOpen,n=e.close,a=e.setTxnOpen,s=c.a.useState(""),i=Object(o.a)(s,2),u=i[0],l=i[1],f=c.a.useContext(S).dispatch;return Object(r.jsx)(O.a,{closeOnOverlayClick:!0,isOpen:t,onClose:function(){l(""),n("camera")},children:Object(r.jsx)(O.h,{children:Object(r.jsxs)(O.d,{children:[Object(r.jsx)(O.g,{}),Object(r.jsx)(O.c,{}),Object(r.jsx)(O.b,{children:Object(r.jsxs)(d.b,{align:"center",children:[u?Object(r.jsx)(g.a,{src:u}):Object(r.jsx)(m.a,{onTakePhotoAnimationDone:function(e){console.log("takePhoto"),l(e)},imageType:v.IMAGE_TYPES.JPG,idealFacingMode:v.FACING_MODES.ENVIRONMENT,isImageMirror:!1,children:Object(r.jsx)(k.a,{"aria-label":"refresh",icon:Object(r.jsx)(T.a,{})})}),Object(r.jsx)(y.a,{isDisabled:!u,onClick:function(){l(""),f({type:"SET_PICTURE",payload:{picture:u}}),a(),n("camera")},children:"Next"})]})})]})})})},A=n(6),E=n(3),I=n.n(E),D=n(8),F=n(810),q=n(812),R=n(813),M=n(814),N=n(830),$=n(815),W=n(832),P=n(818),z=n(404),L=n(835),_=n(817),V=n(125),B=n.n(V),J=n(219),Y=n.n(J),U=n(109),H=n(163),K=(n(401),function(){return B.a.init({host:"arweave.net",port:443})}),G=function(){var e=Object(D.a)(I.a.mark((function e(){var t,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:return t=e.sent,e.next=5,t.network.getInfo();case 5:return n=e.sent,e.abrupt("return",n.height);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(D.a)(I.a.mark((function e(t){var n,r,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=K(),r="","string"!==typeof t){e.next=6;break}r=t,e.next=9;break;case 6:return e.next=8,n.wallets.jwkToAddress(t);case 8:r=e.sent;case 9:return e.t0=n.ar,e.next=12,n.wallets.getBalance(r);case 12:return e.t1=e.sent,a=e.t0.winstonToAr.call(e.t0,e.t1),e.abrupt("return",{address:r,balance:a});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(D.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=K(),e.next=3,Object(H.a)(n,t);case 3:return r=e.sent,e.abrupt("return",{ticker:r.ticker,contract:t,contractState:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(D.a)(I.a.mark((function e(t){var n,r,a,c,s,i,o,u,l,d,f;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.address,r=void 0===n?void 0:n,a=t.name,c=void 0===a?void 0:a,s=t.value,i=void 0===s?void 0:s,o=t.to,u=void 0===o?void 0:o,l=t.cursor,d=void 0===l?void 0:l,f="first: 10 \n    ".concat(r?'owners:["'+r+'"]':"","\n    ").concat(d?'after:"'+d+'"':""," \n    ").concat(c?'tags:{name:"'+c+'",values:["'+i+'"]}':"","\n    ").concat(u?'recipients:  ["'+u+'"]':""),e.abrupt("return",Y.a.post("https://arweave.net/graphql",{query:"query {\n                transactions(".concat(f,"\n                 ) {\n                  edges {\n                    cursor\n                    node {\n                      id\n                      recipient\n                      tags {\n                        name\n                        value\n                      }\n                      fee {\n                        winston\n                        ar\n                      }\n                      quantity {\n                        winston\n                        ar\n                      }\n                      owner {\n                        address\n                      }\n                    }\n                  }\n                }\n              }")}).then((function(e){return e.data.data.transactions.edges})).catch((function(e){return console.log(e),[]})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(D.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.get("https://arweave.net:443/price/".concat(t));case 2:return n=e.sent,r=B.a.init({host:"arweave.net",port:443}),e.abrupt("return",r.ar.winstonToAr(n.data));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(D.a)(I.a.mark((function e(t,n){var r,a,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=B.a.init({host:"arweave.net",port:443}),e.next=4,r.createTransaction({target:t.to,quantity:r.ar.arToWinston(t.amount)},n);case 4:return(a=e.sent).addTag("App-Name","ArMob 2.0"),e.next=8,r.transactions.sign(a,n);case 8:return e.next=10,r.transactions.post(a);case 10:c=e.sent,console.log(c),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),console.log("Error sending tranfer - ".concat(e.t0)),e.abrupt("return","Error submitting transaction - ".concat(e.t0));case 18:return e.abrupt("return","Transaction submitted successfully");case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(D.a)(I.a.mark((function e(t,n,r,a){var c,s,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=K(),e.next=4,Object(U.interactWriteDryRun)(c,a,t,{target:r,qty:n,function:"transfer"});case 4:if(s=e.sent,console.log("Dry-run result is:",s),"ok"!==s.type){e.next=12;break}return e.next=9,Object(U.interactWrite)(c,a,t,{target:r,qty:n,function:"transfer"});case 9:return i=e.sent,console.log(s),e.abrupt("return",i);case 12:return e.abrupt("return","success!");case 15:return e.prev=15,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0.toString());case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),re=function(){var e=Object(D.a)(I.a.mark((function e(t,n,r){var a,c,s,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=K(),e.next=4,t.arrayBuffer();case 4:return c=e.sent,e.next=7,a.createTransaction({data:c},n);case 7:return s=e.sent,r.forEach((function(e){return s.addTag(e.name,e.value)})),e.next=11,a.transactions.sign(s,n);case 11:return e.next=13,a.transactions.post(s);case 13:i=e.sent,console.log(i),e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(0),console.log("Error sending tranfer - ".concat(e.t0)),e.abrupt("return","Error submitting transaction - ".concat(e.t0));case 21:return e.abrupt("return","Transaction submitted successfully");case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n,r){return e.apply(this,arguments)}}(),ae=function(e,t){var n=(t-e)/720;return n>1?"".concat(Math.floor(n)," more days"):n>.041?"".concat(Math.floor(24*n)," more hours"):"less than 1 hour"},ce=function(){var e=Object(D.a)(I.a.mark((function e(){var t,n,r,a,c,s,i,o,u;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="",n=!0,r=K(),a=[];case 4:if(!n){e.next=15;break}return c={query:'\n              query {\n                  transactions(\n                      tags: [\n                          { name: "App-Name", values: ["SmartWeaveContract"] }\n                          {\n                              name: "Contract-Src"\n                              values: ["ngMml4jmlxu0umpiQCsHgPX2pb_Yz6YDB8f7G6j-tpI"]\n                          }\n                      ]\n                      after: "'.concat(t,'"\n                      first: 100\n                  ) {\n                      pageInfo {\n                          hasNextPage\n                      }\n                      edges {\n                          cursor\n                          node {\n                              id\n                          }\n                      }\n                  }\n              }            \n          ')},e.next=8,r.api.post("/graphql",c);case 8:for(s=e.sent,i=s.data,o=0,u=i.data.transactions.edges.length;o<u;o++)a.push(i.data.transactions.edges[o].node.id);(n=i.data.transactions.pageInfo.hasNextPage)&&(t=i.data.transactions.edges[i.data.transactions.edges.length-1].cursor),e.next=4;break;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(D.a)(I.a.mark((function e(t){var n,r,a,c,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=K(),r={query:'\n  query {\n    transactions(ids: ["'.concat(t,'"]) {\n        edges {\n            node {\n                id\n              \ttags {\n                  name\n                  value\n                }\n            }\n        }\n    }\n}')},e.next=4,n.api.post("/graphql",r);case 4:return a=e.sent,console.log(a),c=a.data.data.transactions.edges[0].node.tags.filter((function(e){return"Contract-Src"===e.name}))[0].value,console.log(c),e.next=10,n.transactions.getData(c,{decode:!0,string:!0});case 10:return s=e.sent,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(D.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=K(),e.next=3,Object(H.a)(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(D.a)(I.a.mark((function e(t,n,r,a,c){var s,i,o,u;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in s=K(),console.log("params are"),console.log(r),console.log("types are"),console.log(c),i=Object(A.a)({},r))"integer"===c[o]?i[o]=parseInt(r[o]):"float"===c[o]&&(i[o]=parseFloat(r[o]));return e.next=9,Object(U.interactWriteDryRun)(s,a,n,Object(A.a)(Object(A.a)({},i),{},{function:t}));case 9:return u=e.sent,console.log(u),e.abrupt("return",u.type);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}(),ue=function(){var e=Object(D.a)(I.a.mark((function e(t,n,r,a,c,s){var i,o,u,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u in i=K(),console.log("params are"),console.log(r),console.log("types are"),console.log(c),o=Object(A.a)({},r))"integer"===c[u]?o[u]=parseInt(r[u]):"float"===c[u]&&(o[u]=parseFloat(r[u]));if("write"!==s){e.next=13;break}return e.next=10,Object(U.interactWrite)(i,a,n,Object(A.a)(Object(A.a)({},o),{},{function:t}));case 10:l=e.sent,e.next=16;break;case 13:return e.next=15,Object(U.interactRead)(i,a,n,Object(A.a)(Object(A.a)({},o),{},{function:t}));case 15:l=e.sent;case 16:return console.log(l),e.abrupt("return",l);case 18:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c,s){return e.apply(this,arguments)}}(),le=n(588),de=(n(589),function(){var e=c.a.useState(""),t=Object(o.a)(e,2),n=t[0],a=t[1],s=c.a.useState(""),i=Object(o.a)(s,2),u=i[0],l=i[1],b=c.a.useState([]),p=Object(o.a)(b,2),j=p[0],x=p[1],h=c.a.useState([]),v=Object(o.a)(h,2),m=v[0],O=v[1],g=c.a.useState({}),k=Object(o.a)(g,2),w=k[0],S=k[1],T=function(){var e=Object(D.a)(I.a.mark((function e(){var t,n,r,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(u);case 2:if(t=e.sent,a(t),!t){e.next=15;break}return a(t),e.next=8,le.parse(t,{ecmaVersion:"latest",sourceType:"module"});case 8:return"handle"===(n=e.sent).body[0].declaration.id.name&&(r=n.body[0].declaration.body.body.filter((function(e){return"IfStatement"===e.type&&"input"===e.test.left.object.name})),c=C(r),x(c.writeMethods.filter((function(e){return e.name}))),O(c.readMethods.filter((function(e){return e.name}))),console.log(c)),e.next=12,ie(u);case 12:t=e.sent,console.log(t),S(t);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){var t=[],n=[];return e.forEach((function(e){if("BinaryExpression"===e.test.type&&e.test.left.object&&"input"===e.test.left.object.name)try{var r=e.consequent.body[e.consequent.body.length-1];if("ReturnStatement"===r.type&&"state"===r.argument.properties[0].key.name){var a=e.consequent.body.filter((function(e){return"VariableDeclaration"==e.type&&e.declarations[0].init.object&&"input"===e.declarations[0].init.object.name})).map((function(e){return e.declarations[0].id.name})),c=e.test.right.value;n.push({name:c,params:a,methodType:"write",contractId:u})}else{console.log("found read method");var s=e.consequent.body.filter((function(e){return"VariableDeclaration"===e.type&&(e.declarations[0].init.left&&e.declarations[0].init.left.object&&"input"===e.declarations[0].init.left.object.name||e.declarations[0].init.object&&"input"===e.declarations[0].init.object.name)})).map((function(e){return e.declarations[0].id.name})),i=e.test.right.value;t.push({name:i,params:s,methodType:"read",contractId:u})}}catch(o){console.log(o)}})),{readMethods:t,writeMethods:n}};return Object(r.jsxs)(d.c,{children:[Object(r.jsx)(F.a,{placeholder:"Smartweave Contract ID",value:u,onChange:function(e){return l(e.target.value)}}),Object(r.jsx)(y.a,{onClick:T,children:"Load Contract"}),Object(r.jsx)(f.a,{size:"xs",children:"Contract Source"}),Object(r.jsx)(q.a,{w:"100%",children:Object(r.jsx)(R.a,{overflow:"scroll",height:"200px",readOnly:!0,fontSize:"xs",isReadOnly:!0,defaultValue:n})}),Object(r.jsx)(f.a,{size:"xs",children:"Contract State"}),Object(r.jsx)(q.a,{w:"100%",overflow:"scroll",height:"200px",fontSize:"xs",align:"start",children:JSON.stringify(w,null,2)}),Object(r.jsx)(f.a,{size:"xs",children:"Write Methods"}),Object(r.jsx)(M.a,{children:j&&j.map((function(e){return Object(r.jsx)(M.b,{children:Object(r.jsx)(fe,{name:e.name,params:e.params,methodType:e.methodType,contractId:u})})}))}),Object(r.jsx)(f.a,{size:"xs",children:"Read Methods"}),Object(r.jsx)(M.a,{children:m&&m.map((function(e){return Object(r.jsx)(M.b,{children:Object(r.jsx)(fe,{name:e.name,params:e.params,methodType:e.methodType,contractId:u})})}))})]})}),fe=function(e){var t=e.name,n=e.params,a=e.methodType,s=e.contractId,i=c.a.useState({}),u=Object(o.a)(i,2),l=u[0],f=u[1],b=c.a.useState({}),x=Object(o.a)(b,2),h=x[0],v=x[1],m=c.a.useContext(S).state,O=Object(N.a)(),g=c.a.useState(),k=Object(o.a)(g,2),w=k[0],T=k[1],C=Object($.a)(),E=C.isOpen,M=C.onToggle,V=function(){var e=Object(D.a)(I.a.mark((function e(n){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(t,s,l,m.key,h,a);case 2:r=e.sent,O(r?{title:"Successfully submitted transaction!",status:"success",duration:3e3,position:"bottom"}:{title:"Error submitting transaction",status:"error",duration:3e3,position:"bottom"}),n(),T();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(W.a,{allowToggle:!0,children:Object(r.jsxs)(W.d,{children:[Object(r.jsxs)(W.b,{children:[Object(r.jsx)(P.a,{children:t}),Object(r.jsx)(W.c,{})]}),Object(r.jsxs)(W.e,{children:[n.map((function(e,n){return Object(r.jsxs)(j.a,{children:[Object(r.jsx)(F.a,{placeholder:e,value:l[n],onChange:function(t){var n=Object(A.a)({},l);n[e]=t.target.value,f(n)}},t+e),Object(r.jsxs)(z.a,{name:"param-type",onChange:function(t){var n=Object(A.a)({},h);n[e]=t.toString(),v(n)},value:h[e],direction:"horizontal",children:[Object(r.jsx)(L.a,{value:"string",children:"String"}),Object(r.jsx)(L.a,{value:"integer",children:"Integer"}),Object(r.jsx)(L.a,{value:"float",children:"Float"})]})]})})),"write"===a?Object(r.jsx)(r.Fragment,{children:!E&&!w&&Object(r.jsx)(y.a,{onClick:function(){M(),oe(t,s,l,m.key,h).then((function(e){return T(e)}))},children:"Test Contract Method Call"})}):Object(r.jsx)(r.Fragment,{children:E?Object(r.jsx)(y.a,{onClick:function(){M(),T()},children:"Start Over"}):Object(r.jsx)(y.a,{onClick:function(){M(),ue(t,s,l,m.key,h,a).then((function(e){return T(e)}))},children:"Read Contract"})}),Object(r.jsx)(_.a,{in:E,children:"write"===a?Object(r.jsxs)(d.c,{children:[w?Object(r.jsxs)(P.a,{children:["Transaction status is ",w]}):Object(r.jsx)(p.a,{}),Object(r.jsxs)(d.a,{children:[Object(r.jsx)(y.a,{onClick:function(){return V(M)},children:"Live dangerously!"}),Object(r.jsx)(y.a,{onClick:function(){M(),T()},children:"Start Over"})]})]}):Object(r.jsxs)(q.a,{children:[Object(r.jsx)(P.a,{children:"Method Result"}),w?Object(r.jsx)(R.a,{isReadOnly:!0,overflow:"scroll",height:"200px",readOnly:!0,fontSize:"xs",defaultValue:JSON.stringify(w,null,2)}):Object(r.jsx)(p.a,{})]})})]})]},t)})},be=function(e){var t=e.icon,n=e.label,a=e.clickHandler,c=e.yPos;return Object(r.jsxs)(d.b,{isInline:!0,position:"fixed",bottom:c,right:"20px",align:"center",children:[Object(r.jsx)(P.a,{fontSize:11,children:n}),Object(r.jsx)(k.a,{"aria-label":"wallet",icon:t,isRound:!0,onClick:Object(D.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a());case 1:case"end":return e.stop()}}),e)})))})]})},pe=function(e){var t,n=e.children,a=c.a.useState(!1),s=Object(o.a)(a,2),i=s[0],u=s[1],l=c.a.useRef(null),d=n&&n.filter((function(e){return c.a.isValidElement(e)}));return t=l,c.a.useEffect((function(){function e(e){t.current&&!t.current.contains(e.target)&&u(!1)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t]),Object(r.jsxs)("div",{ref:l,style:{position:"fixed",bottom:"50px",right:"20px"},children:[Object(r.jsx)(k.a,{"aria-label":"open",isRound:!0,icon:i?Object(r.jsx)(h.f,{}):Object(r.jsx)(h.g,{}),onClick:function(e){return u(!i)}}),i&&d.map((function(e,t){if(c.a.isValidElement(e))return c.a.cloneElement(e,Object(A.a)(Object(A.a)({},e.props),{},{yPos:(100+50*t).toString()+"px"}))}))]})},je=n(19),xe=n(384),he=n(385),ve=n(402),me=n(124),Oe=n(823),ge=n(837),ke=n(821),ye=n(826),we=n(820),Se=n(829),Te=n(231),Ce=n(836),Ae=n(822),Ee=n(12),Ie=n(88),De=n(29),Fe=n(156),qe=n.n(Fe),Re=n(83),Me=n(51),Ne=n.n(Me),$e=n(386),We=n.n($e);function Pe(e,t,n,r){return new(n||(n=Promise))((function(a,c){function s(e){try{o(r.next(e))}catch(e){c(e)}}function i(e){try{o(r.throw(e))}catch(e){c(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}o((r=r.apply(e,t||[])).next())}))}function ze(e){var t=e.query,n=e.variables;return Pe(this,void 0,void 0,I.a.mark((function e(){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify({query:t,variables:n}),e.next=3,function(e){return Pe(this,void 0,void 0,I.a.mark((function t(){var n,r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"POST",headers:{"content-type":"application/json"},body:e},t.next=3,qe()("https://arweave.net/graphql",n);case 3:return r=t.sent,t.next=6,r.clone().json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))}(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))}var Le='query($owners: [String!], $recipients: [String!], $num: Int) {\n  transactions(\n    owners: $owners\n    recipients: $recipients\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: "Genesis" }\n    ]\n    first: $num\n  ) {\n    edges {\n      node {\n        id\n        owner {\n          address\n        }\n      }\n    }\n  }\n}\n',_e=2147483647,Ve=function(e,t,n){return Pe(void 0,void 0,void 0,I.a.mark((function r(){var a,c,s;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Re.a)(e,n);case 2:if(a=r.sent.vault,c=0,!(t in a)){r.next=9;break}return r.next=7,e.network.getInfo();case 7:s=r.sent.height,c+=a[t].filter((function(e){return s<e.end})).map((function(e){return e.balance})).reduce((function(e,t){return e+t}),0);case 9:return r.abrupt("return",c);case 10:case"end":return r.stop()}}),r)})))},Be=function(e,t,n){return Pe(void 0,void 0,void 0,I.a.mark((function r(){var a,c,s;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Ve(e,t,n);case 2:return r.t0=r.sent,r.t1=1*r.t0,a=r.t1/2,r.next=7,function(e,t,n){return Pe(void 0,void 0,void 0,I.a.mark((function r(){var a,c,s,i,o;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Re.a)(e,n);case 2:if(a=r.sent.vault,!(t in a)){r.next=24;break}return r.next=6,e.network.getInfo();case 6:c=r.sent.height,s=Object(De.a)(a[t]),r.prev=8,s.s();case 10:if((i=s.n()).done){r.next=16;break}if(o=i.value,!(c<o.end)){r.next=14;break}return r.abrupt("return",o.end-o.start);case 14:r.next=10;break;case 16:r.next=21;break;case 18:r.prev=18,r.t0=r.catch(8),s.e(r.t0);case 21:return r.prev=21,s.f(),r.finish(21);case 24:return r.abrupt("return",0);case 25:case"end":return r.stop()}}),r,null,[[8,18,21,24]])})))}(e,t,n);case 7:return r.t2=r.sent,r.t3=1*r.t2,c=r.t3/3,r.next=12,function(e,t){return Pe(void 0,void 0,void 0,I.a.mark((function n(){return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=parseFloat,n.t1=e.ar,n.next=4,e.wallets.getBalance(t);case 4:return n.t2=n.sent,n.t3=n.t1.winstonToAr.call(n.t1,n.t2),n.abrupt("return",(0,n.t0)(n.t3));case 7:case"end":return n.stop()}}),n)})))}(e,t);case 12:return r.t4=r.sent,r.t5=1*r.t4,s=r.t5/6,r.abrupt("return",parseFloat((a+c+s).toFixed(3)));case 16:case"end":return r.stop()}}),r)})))},Je=function(e,t,n){return Pe(void 0,void 0,void 0,I.a.mark((function r(){var a,c,s,i,o,u;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ze({query:Le,variables:{recipients:[n],num:_e}});case 2:a=r.sent.data.transactions.edges,c=[],s=[],i=Object(De.a)(a),r.prev=6,u=I.a.mark((function n(){var r;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=o.value,s.find((function(e){return e===r.node.owner.address}))){n.next=9;break}return n.next=4,Ve(e,r.node.owner.address,t);case 4:if(n.t0=n.sent,n.t1=n.t0>0,!n.t1){n.next=8;break}c.push(r.node.owner.address);case 8:s.push(r.node.owner.address);case 9:case"end":return n.stop()}}),n)})),i.s();case 9:if((o=i.n()).done){r.next=13;break}return r.delegateYield(u(),"t0",11);case 11:r.next=9;break;case 13:r.next=18;break;case 15:r.prev=15,r.t1=r.catch(6),i.e(r.t1);case 18:return r.prev=18,i.f(),r.finish(18);case 21:return r.abrupt("return",c);case 22:case"end":return r.stop()}}),r,null,[[6,15,18,21]])})))},Ye=function e(t){var n=t.findIndex((function(e){return isNaN(e)}));if(-1===n)return t;for(var r=n;r<t.length&&isNaN(t[r]);)r++;for(var a=n;a<r;a++)t[a]=0===n?t[r]:t[n-1];return e(t)},Ue=function(e,t,n,r){return Pe(void 0,void 0,void 0,I.a.mark((function a(){var c,s,i,o,u,l,d,f,b,p,j,x,h,v,m,O,g,k,y;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Je(e,n,r);case 2:return c=a.sent,a.next=5,ze({query:'\n        query($posts: [String!], $num: Int) {\n          transactions(\n            owners: $posts\n            tags: [\n              { name: "Exchange", values: "Verto" }\n              { name: "Type", values: "Confirmation" }\n            ]\n            first: $num\n          ) {\n            edges {\n              node {\n                id\n                block {\n                  timestamp\n                }\n                tags {\n                  name\n                  value\n                }\n              }\n            }\n          }\n        }      \n      ',variables:{posts:c,num:_e}});case 5:s=a.sent.data.transactions.edges,i=[],o=Object(De.a)(s),a.prev=8,o.s();case 10:if((u=o.n()).done){a.next=22;break}if(l=u.value,d=l.node,!(f=d.tags.find((function(e){return"Received"===e.name})))||f.value.split(" ")[1]!==t){a.next=20;break}if(!(b=d.tags.find((function(e){return"Swap"===e.name})))){a.next=20;break}return a.next=18,ze({query:"\n                query($txID: ID!) {\n                  transaction(id: $txID) {\n                    tags {\n                      name\n                      value\n                    }\n                  }\n                }          \n              ",variables:{txID:b.value}});case 18:(p=a.sent.data.transaction.tags.find((function(e){return"Rate"===e.name})))&&i.push({id:d.id,rate:parseFloat(p.value),timestamp:d.block?d.block.timestamp:parseInt((new Date).getTime().toString().slice(0,-3))});case 20:a.next=10;break;case 22:a.next=27;break;case 24:a.prev=24,a.t0=a.catch(8),o.e(a.t0);case 27:return a.prev=27,o.f(),a.finish(27);case 30:if(j=[],x=[],i.length>0){for(h=Ne()().add(1,"days").hours(0).minutes(0).seconds(0),v=i[i.length-1].timestamp;h.unix()>=v;){m=[],O=h.clone().subtract(1,"days"),g=Object(De.a)(i);try{for(g.s();!(k=g.n()).done;)(y=k.value).timestamp<=h.unix()&&y.timestamp>=O.unix()&&m.push(y.rate)}catch(w){g.e(w)}finally{g.f()}j.push(m.reduce((function(e,t){return e+t}),0)/m.length),x.push(O.format("MM.DD")),h=O}j.every((function(e){return isNaN(e)}))||(j=Ye(j.reverse()))}return a.abrupt("return",{rates:j,dates:x.reverse()});case 34:case"end":return a.stop()}}),a,null,[[8,24,27,30]])})))},He='query($recipients: [String!], $token: [String!]!, $num: Int) {\n  transactions(\n    recipients: $recipients\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: "Sell" }\n      { name: "Contract", values: $token }\n    ]\n    first: $num\n  ) {\n    edges {\n      node {\n        block {\n          timestamp\n        }\n        tags {\n          name\n          value\n        }\n      }\n    }\n  }\n}\n',Ke=function(e,t,n,r){return Pe(void 0,void 0,void 0,I.a.mark((function a(){var c,s,i,o,u;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Je(e,n,r);case 2:return c=a.sent,a.next=5,ze({query:He,variables:{recipients:c,token:t,num:_e}});case 5:return s=a.sent.data.transactions.edges,i=[],s.map((function(e){var t=e.node,n=t.tags.find((function(e){return"Input"===e.name}));n&&i.push({amnt:JSON.parse(n.value).qty,timestamp:t.block.timestamp})})),o=[],u=[],i.length>0&&function(){for(var e=Ne()().add(1,"days").hours(0).minutes(0).seconds(0),t=function(){var t=e.clone().subtract(1,"days"),n=i.filter((function(n){return n.timestamp<=e.unix()&&n.timestamp>=t.unix()})).map((function(e){return e.amnt})).reduce((function(e,t){return e+t}),0);o.push(n),u.push(t.format("MMM DD")),e=t};e.unix()>=i[i.length-1].timestamp;)t()}(),a.abrupt("return",{volume:o.reverse(),dates:u.reverse()});case 11:case"end":return a.stop()}}),a)})))},Ge=function(e,t,n){return Pe(void 0,void 0,void 0,I.a.mark((function r(){var a,c,s,i,o,u,l,d;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=[t],"undefined"!=typeof window&&JSON.parse(localStorage.getItem("tokens")||"[]").map((function(e){return a.push(e)})),c=[],s=0,i=a;case 4:if(!(s<i.length)){r.next=21;break}return o=i[s],r.prev=6,r.next=9,Object(Re.a)(e,o);case 9:return u=r.sent,r.next=12,Ke(e,o,t,n);case 12:l=r.sent,c.push({id:o,name:u.name,ticker:u.ticker,volume:l.volume.reduce((function(e,t){return e+t}),0)}),r.next=18;break;case 16:r.prev=16,r.t0=r.catch(6);case 18:s++,r.next=4;break;case 21:return c.sort((function(e,t){return t.volume-e.volume})),d=[],r.abrupt("return",(c.map((function(e){return d.push({id:e.id,name:e.name,ticker:e.ticker})})),d));case 24:case"end":return r.stop()}}),r,null,[[6,16]])})))},Qe=function(e,t){return Pe(void 0,void 0,void 0,I.a.mark((function n(){var r,a,c,s;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ze({query:'query($exchange: String!) {\n  transactions(\n    recipients: [$exchange]\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: "Token" }\n    ]\n    first: 2147483647\n  ) {\n    edges {\n      node {\n        tags {\n          name\n          value\n        }\n      }\n    }\n  }\n}\n',variables:{exchange:t}});case 2:r=n.sent.data.transactions.edges,a=[],r.map((function(e){var t=e.node.tags.find((function(e){return"Contract"===e.name}));if(t){var n=t.value;a.find((function(e){return e.id===n}))||a.push({id:n,name:"",ticker:"",amnt:0,valid:!0})}})),c=0;case 6:if(!(c<a.length)){n.next=17;break}return n.prev=7,n.delegateYield(I.a.mark((function n(){var r,s,i,o;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Re.b)(e,a[c].id);case 2:return r=n.sent,s=JSON.parse(r),a[c].name=s.name,a[c].ticker=s.ticker,n.next=7,ze({query:'\n            query($exchange: String!, $contract: [String!]!) {\n              transactions(\n                recipients: [$exchange]\n                tags: [\n                  { name: "Exchange", values: "Verto" }\n                  { name: "Type", values: "Token" }\n                  { name: "Contract", values: $contract }\n                ]\n                first: 2147483647\n              ) {\n                edges {\n                  node {\n                    owner {\n                      address\n                    }\n                  }\n                }\n              }\n            }\n          ',variables:{exchange:t,contract:a[c].id}});case 7:i=n.sent.data.transactions.edges,o={},i=i.filter((function(e){var t=e.node;return!(t.owner.address in o)&&(o[t.owner.address]=!0)})),a[c].amnt=i.length;case 10:case"end":return n.stop()}}),n)}))(),"t0",9);case 9:n.next=14;break;case 11:n.prev=11,n.t1=n.catch(7),a[c].valid=!1;case 14:c++,n.next=6;break;case 17:return a.sort((function(e,t){return t.amnt-e.amnt})),s=[],n.abrupt("return",(a.map((function(e){e.valid&&s.push({id:e.id,name:e.name,ticker:e.ticker})})),s.splice(0,10)));case 20:case"end":return n.stop()}}),n,null,[[7,11]])})))},Xe=function(e,t,n){return Pe(void 0,void 0,void 0,I.a.mark((function r(){var a,c;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ze({query:Le,variables:{owners:[t],recipients:[n],num:1}});case 2:if(r.t1=a=r.sent.data.transactions.edges[0],r.t0=null===r.t1,r.t0){r.next=6;break}r.t0=void 0===a;case 6:if(!r.t0){r.next=10;break}r.t2=void 0,r.next=11;break;case 10:r.t2=a.node.id;case 11:if(c=r.t2){r.next=14;break}return r.abrupt("return","invalid");case 14:return r.t3=JSON,r.next=17,e.transactions.getData(c,{decode:!0,string:!0});case 17:return r.t4=r.sent.toString(),r.abrupt("return",r.t3.parse.call(r.t3,r.t4));case 19:case"end":return r.stop()}}),r)})))},Ze=function e(t){var n=t.findIndex((function(e){return isNaN(e)}));if(-1===n)return t;for(var r=n;r<t.length&&isNaN(t[r]);)r++;for(var a=n;a<r;a++)t[a]=0===n?t[r]:t[n-1];return e(t)},et=function(e,t,n,r){return Pe(void 0,void 0,void 0,I.a.mark((function a(){var c,s,i,o,u,l,d,f,b,p,j,x,h,v;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Je(e,n,r);case 2:return c=a.sent,a.next=5,ze({query:'\n        query($posts: [String!], $num: Int) {\n          transactions(\n            owners: $posts\n            tags: [\n              { name: "Exchange", values: "Verto" }\n              { name: "Type", values: "Confirmation" }\n            ]\n            first: $num\n          ) {\n            edges {\n              node {\n                id\n                block {\n                  timestamp\n                }\n                tags {\n                  name\n                  value\n                }\n              }\n            }\n          }\n        }      \n      ',variables:{posts:c,num:_e}});case 5:s=a.sent.data.transactions.edges,i=[],o=Object(De.a)(s),a.prev=8,o.s();case 10:if((u=o.n()).done){a.next=23;break}if(l=u.value,d=l.node,!(f=d.tags.find((function(e){return"Received"===e.name})))||"AR"!==f.value.split(" ")[1]){a.next=21;break}if(!(b=d.tags.find((function(e){return"Match"===e.name})))){a.next=21;break}return a.next=18,ze({query:"\n                query($txID: ID!) {\n                  transaction(id: $txID) {\n                    tags {\n                      name\n                      value\n                    }\n                  }\n                }          \n              ",variables:{txID:b.value}});case 18:p=a.sent.data.transaction,(j=p.tags.find((function(e){return"Contract"===e.name})))&&j.value===t&&(x=p.tags.find((function(e){return"Rate"===e.name})))&&i.push({rate:1/parseFloat(x.value),timestamp:d.block?d.block.timestamp:parseInt((new Date).getTime().toString().slice(0,-3))});case 21:a.next=10;break;case 23:a.next=28;break;case 25:a.prev=25,a.t0=a.catch(8),o.e(a.t0);case 28:return a.prev=28,o.f(),a.finish(28);case 31:return h=[],v=[],i.length>0&&function(){for(var e=Ne()().add(1,"days").hours(0).minutes(0).seconds(0),t=function(){var t=e.clone().subtract(1,"days"),n=i.filter((function(n){return n.timestamp<=e.unix()&&n.timestamp>=t.unix()})).map((function(e){return e.rate}));h.push(n.reduce((function(e,t){return e+t}),0)/n.length),v.push(t.format("MMM DD")),e=t};e.unix()>=i[i.length-1].timestamp;)t();h.every((function(e){return isNaN(e)}))||(h=Ze(h.reverse()))}(),a.abrupt("return",{prices:h,dates:v.reverse()});case 35:case"end":return a.stop()}}),a,null,[[8,25,28,31]])})))},tt=function(e){for(var t=0,n=Math.random(),r=0,a=Object.keys(e);r<a.length;r++){var c=a[r];if(n<=(t+=e[c])&&e[c]>0)return c}},nt=function(e,t){return Pe(void 0,void 0,void 0,I.a.mark((function n(){var r,a;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ze({query:'\n        query($addr: String!, $chain: [String!]!) {\n          transactions(\n            owners: [$addr]\n            tags: [\n              { name: "Application", values: "ArLink" }\n              { name: "Chain", values: $chain }\n            ]\n            first: 1\n          ) {\n            edges {\n              node {\n                tags {\n                  name\n                  value\n                }\n              }\n            }\n          }\n        }\n      ',variables:{addr:e,chain:t}});case 2:if(1!==(r=n.sent.data.transactions.edges).length){n.next=7;break}if(!(a=r[0].node.tags.find((function(e){return"Wallet"===e.name})))){n.next=7;break}return n.abrupt("return",a.value);case 7:return n.abrupt("return","invalid");case 8:case"end":return n.stop()}}),n)})))},rt=function(e,t,n,r,a){return Pe(void 0,void 0,void 0,I.a.mark((function c(){var s,i,u,l,d,f,b,p,j;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,function(e,t){return Pe(void 0,void 0,void 0,I.a.mark((function n(){var r,a,c,s,i,o,u,l,d,f,b,p,j,x,h;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Re.a)(e,t);case 2:for(r=n.sent,a=r.balances,c=r.vault,s=0,i=0,o=Object.keys(a);i<o.length;i++)u=o[i],s+=a[u];l=0,d=Object.keys(c);case 8:if(!(l<d.length)){n.next=17;break}if(f=d[l],c[f].length){n.next=12;break}return n.abrupt("continue",14);case 12:b=c[f].map((function(e){return e.balance})).reduce((function(e,t){return e+t}),0),s+=b,f in a?a[f]+=b:a[f]=b;case 14:l++,n.next=8;break;case 17:for(p={},j=0,x=Object.keys(a);j<x.length;j++)h=x[j],p[h]=a[h]/s;return n.abrupt("return",tt(p));case 20:case"end":return n.stop()}}),n)})))}(e,a);case 2:return s=c.sent,i=Math.ceil(.005*Math.ceil(n)),u={Exchange:"Verto",Type:"Fee-VRT-Holder","App-Name":"SmartWeaveAction","App-Version":"0.3.0",Contract:r,Input:JSON.stringify({function:"transfer",target:s,qty:i})},c.next=7,e.createTransaction({target:s,data:Math.random().toString().slice(-4)},t);case 7:for(l=c.sent,d=0,f=Object.entries(u);d<f.length;d++)b=Object(o.a)(f[d],2),p=b[0],j=b[1],l.addTag(p,j);return c.abrupt("return",l);case 10:case"end":return c.stop()}}),c)})))},at=function(e,t,n){return Pe(void 0,void 0,void 0,I.a.mark((function r(){var a,c;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ze({query:Le,variables:{owners:[t],recipients:[n]}});case 2:if(r.t1=a=r.sent.data.transactions.edges[0],r.t0=null===r.t1,r.t0){r.next=6;break}r.t0=void 0===a;case 6:if(!r.t0){r.next=10;break}r.t2=void 0,r.next=11;break;case 10:r.t2=a.node.id;case 11:return c=r.t2,r.t3=JSON,r.next=15,e.transactions.getData(c,{decode:!0,string:!0});case 15:return r.t4=r.sent.toString(),r.abrupt("return",r.t3.parse.call(r.t3,r.t4).tradeFee);case 17:case"end":return r.stop()}}),r)})))},ct=function(e,t){return Pe(void 0,void 0,void 0,I.a.mark((function n(){var r;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.transactions.getPrice(parseFloat(t.data_size),t.target);case 2:return r=n.sent,n.abrupt("return",parseFloat(e.ar.winstonToAr(r)));case 4:case"end":return n.stop()}}),n)})))},st=function(e,t,n,r){return Pe(void 0,void 0,void 0,I.a.mark((function a(){var c,s,i,o,u,l,d,f,b,p,j,x,h,v,m,O,g,k;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Re.a)(e,t);case 2:c=a.sent,s=c.balances,i=c.vault,o=0,u=Object.keys(s);case 6:if(!(o<u.length)){a.next=17;break}return l=u[o],a.next=10,nt(l,n);case 10:if(a.t0=a.sent,a.t1="invalid"===a.t0,!a.t1){a.next=14;break}delete s[l],delete i[l];case 14:o++,a.next=6;break;case 17:for(d=0,f=0,b=Object.keys(s);f<b.length;f++)p=b[f],d+=s[p];j=0,x=Object.keys(i);case 20:if(!(j<x.length)){a.next=29;break}if(h=x[j],i[h].length){a.next=24;break}return a.abrupt("continue",26);case 24:v=i[h].map((function(e){return e.balance})).reduce((function(e,t){return e+t}),0),d+=v,h in s?s[h]+=v:s[h]=v;case 26:j++,a.next=20;break;case 29:for(m={},O=0,g=Object.keys(s);O<g.length;O++)k=g[O],m[k]=s[k]/d;return a.next=33,nt(tt(m)||r,n);case 33:return a.abrupt("return",a.sent);case 34:case"end":return a.stop()}}),a)})))},it="query($recipients: [String!], $owners: [String!], $block: Int) {\n  transactions(\n    recipients: $recipients\n    owners: $owners\n    block: { max: $block }\n  ) {\n    edges {\n      node {\n        id\n        block {\n          timestamp\n        }\n        quantity {\n          ar\n        }\n      }\n    }\n  }\n}\n";console.log=function(e){var t;(null===(t=(new Error).stack)||void 0===t?void 0:t.includes("smartweave"))||console.info(e)};var ot=function(){function e(t,n,r){Object(Ee.a)(this,e),this.arweave=n||new We.a({host:"arweave.net",port:443,protocol:"https",logging:!1}),this.keyfile=t,this.exchangeContract=(null==r?void 0:r.exchangeContract)||"usjm4PCxUd5mtaon7zc97-dt-3qf67yPyqgzLnLqk5A",this.exchangeWallet=(null==r?void 0:r.exchangeWallet)||"aLemOhg9OGovn-0o4cOCbueiHT9VgdYnpJpq7NgMA1A"}return Object(Ie.a)(e,[{key:"arVolume",value:function(){return e=this.arweave,t=this.exchangeContract,n=this.exchangeWallet,Pe(void 0,void 0,void 0,I.a.mark((function r(){var a,c,s,i,o;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Je(e,t,n);case 2:return a=r.sent,r.next=5,ze({query:'\n        query($recipients: [String!], $num: Int) {\n          transactions(\n            recipients: $recipients\n            tags: [\n              { name: "Exchange", values: "Verto" }\n              { name: "Type", values: "Buy" }\n            ]\n            first: $num\n          ) {\n            edges {\n              node {\n                quantity {\n                  ar\n                }\n                block {\n                  timestamp\n                }\n              }\n            }\n          }\n        }      \n      ',variables:{recipients:a,num:_e}});case 5:return c=r.sent.data.transactions.edges,s=[],c.map((function(e){var t=e.node;s.push({amnt:parseFloat(t.quantity.ar),timestamp:t.block.timestamp})})),i=[],o=[],s.length>0&&function(){for(var e=Ne()().add(1,"days").hours(0).minutes(0).seconds(0),t=function(){var t=e.clone().subtract(1,"days"),n=s.filter((function(n){return n.timestamp<=e.unix()&&n.timestamp>=t.unix()})).map((function(e){return e.amnt})).reduce((function(e,t){return e+t}),0);i.push(n),o.push(t.format("MMM DD")),e=t};e.unix()>=s[s.length-1].timestamp;)t()}(),r.abrupt("return",{volume:i.reverse(),dates:o.reverse()});case 11:case"end":return r.stop()}}),r)})));var e,t,n}},{key:"chainRate",value:function(e){return Ue(this.arweave,e,this.exchangeContract,this.exchangeWallet)}},{key:"createOrder",value:function(e,t,n,r,a){return this.keyfile?function(e,t,n,r,a,c,s,i,u){return Pe(void 0,void 0,void 0,I.a.mark((function l(){var d,f,b,p,j,x,h,v,m,O,g,k,y,w,S,T,C,A,E,D,F,q,R,M;return I.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Xe(e,c,i);case 2:if(d=l.sent,!(a in d.blockedTokens)){l.next=5;break}return l.abrupt("return","token");case 5:return l.next=7,e.wallets.jwkToAddress(t);case 7:return f=l.sent,l.t0=parseFloat,l.t1=e.ar,l.next=12,e.wallets.getBalance(f);case 12:return l.t2=l.sent,l.t3=l.t1.winstonToAr.call(l.t1,l.t2),b=(0,l.t0)(l.t3),l.next=17,Object(Re.a)(e,a);case 17:if(l.t4=f,p=l.sent.balances[l.t4],"buy"!==n.toLowerCase()){l.next=40;break}return j={Exchange:"Verto",Type:"Buy",Token:a},l.next=23,e.createTransaction({target:c,quantity:e.ar.arToWinston(r.toString())},t);case 23:for(x=l.sent,h=0,v=Object.entries(j);h<v.length;h++)m=Object(o.a)(v[h],2),O=m[0],g=m[1],x.addTag(O,g);return l.next=27,function(e,t,n,r){return Pe(void 0,void 0,void 0,I.a.mark((function a(){var c,s,i,u,l,d,f,b;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c={Exchange:"Verto",Type:"Fee-Exchange"},s=.005*n,a.next=4,e.createTransaction({target:r,quantity:e.ar.arToWinston(s.toString())},t);case 4:for(i=a.sent,u=0,l=Object.entries(c);u<l.length;u++)d=Object(o.a)(l[u],2),f=d[0],b=d[1],i.addTag(f,b);return a.abrupt("return",i);case 7:case"end":return a.stop()}}),a)})))}(e,t,r,i);case 27:return k=l.sent,l.next=30,ct(e,x);case 30:return l.t5=l.sent,l.next=33,ct(e,k);case 33:return l.t6=l.sent,l.t7=l.t5+l.t6,l.t8=r,l.t9=l.t7+l.t8,l.t10=.005*r,y=l.t9+l.t10,l.abrupt("return",b>=y?{txs:[x,k],ar:y,pst:0}:"ar");case 40:if("sell"!==n.toLowerCase()||!u){l.next=75;break}return w={Exchange:"Verto",Type:"Sell","App-Name":"SmartWeaveAction","App-Version":"0.3.0",Contract:a,Rate:1/u,Input:JSON.stringify({function:"transfer",target:c,qty:Math.ceil(r)})},l.next=44,e.createTransaction({target:c,data:Math.random().toString().slice(-4)},t);case 44:for(S=l.sent,T=0,C=Object.entries(w);T<C.length;T++)A=Object(o.a)(C[T],2),E=A[0],D=A[1],S.addTag(E,D.toString());return l.next=48,function(e,t,n,r,a,c){return Pe(void 0,void 0,void 0,I.a.mark((function s(){var i,u,l,d,f,b,p,j;return I.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.t0=Math,s.t1=Math.ceil(n),s.next=4,at(e,a,c);case 4:return s.t2=s.sent,s.t3=s.t1*s.t2,i=s.t0.ceil.call(s.t0,s.t3),u={Exchange:"Verto",Type:"Fee-Trading-Post","App-Name":"SmartWeaveAction","App-Version":"0.3.0",Contract:r,Input:JSON.stringify({function:"transfer",target:a,qty:i})},s.next=10,e.createTransaction({target:a,data:Math.random().toString().slice(-4)},t);case 10:for(l=s.sent,d=0,f=Object.entries(u);d<f.length;d++)b=Object(o.a)(f[d],2),p=b[0],j=b[1],l.addTag(p,j);return s.abrupt("return",l);case 13:case"end":return s.stop()}}),s)})))}(e,t,r,a,c,i);case 48:return F=l.sent,l.next=51,rt(e,t,r,a,s);case 51:return q=l.sent,l.next=54,ct(e,S);case 54:return l.t11=l.sent,l.next=57,ct(e,F);case 57:return l.t12=l.sent,l.next=60,ct(e,q);case 60:return l.t13=l.sent,l.t14=l.t12+l.t13,R=l.t11+l.t14,l.t15=Math.ceil(r),l.t16=Math,l.t17=Math.ceil(r),l.next=68,at(e,c,i);case 68:return l.t18=l.sent,l.t19=l.t17*l.t18,l.t20=l.t16.ceil.call(l.t16,l.t19),l.t21=l.t15+l.t20,l.t22=Math.ceil(.005*Math.ceil(r)),M=l.t21+l.t22,l.abrupt("return",b>=R?p&&p>=M?{txs:[S,F,q],ar:R,pst:M}:"pst":"ar");case 75:return l.abrupt("return","invalid");case 76:case"end":return l.stop()}}),l)})))}(this.arweave,this.keyfile,e,t,n,r,this.exchangeContract,this.exchangeWallet,a):new Promise((function(e){return e("keyfile")}))}},{key:"createSwap",value:function(e,t,n,r,a){return this.keyfile?function(e,t,n,r,a,c,s,i,u){return Pe(void 0,void 0,void 0,I.a.mark((function l(){var d,f,b,p,j,x,h,v,m,O,g,k,y,w,S,T,C;return I.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,e.wallets.jwkToAddress(t);case 2:return d=l.sent,l.t0=parseFloat,l.t1=e.ar,l.next=7,e.wallets.getBalance(d);case 7:if(l.t2=l.sent,l.t3=l.t1.winstonToAr.call(l.t1,l.t2),f=(0,l.t0)(l.t3),!s){l.next=35;break}return l.next=13,nt(d,n);case 13:if(l.sent){l.next=15;break}return l.abrupt("return","arLink");case 15:if(u){l.next=17;break}return l.abrupt("return","invalid");case 17:return b={Exchange:"Verto",Type:"Swap",Chain:n,Rate:u},l.next=20,e.createTransaction({target:r,quantity:e.ar.arToWinston(s.toString())},t);case 20:for(p=l.sent,j=0,x=Object.entries(b);j<x.length;j++)h=Object(o.a)(x[j],2),v=h[0],m=h[1],p.addTag(v,m.toString());return l.next=24,function(e,t,n,r,a){return Pe(void 0,void 0,void 0,I.a.mark((function c(){var s,i,u,l,d,f,b,p;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.t0=n,c.next=3,at(e,r,a);case 3:return c.t1=c.sent,s=c.t0*c.t1,i={Exchange:"Verto",Type:"Fee-Trading-Post"},c.next=8,e.createTransaction({target:r,quantity:e.ar.arToWinston(s.toString())},t);case 8:for(u=c.sent,l=0,d=Object.entries(i);l<d.length;l++)f=Object(o.a)(d[l],2),b=f[0],p=f[1],u.addTag(b,p);return c.abrupt("return",{tx:u,fee:s});case 11:case"end":return c.stop()}}),c)})))}(e,t,s,r,a);case 24:return O=l.sent,g=O.tx,k=O.fee,l.next=29,ct(e,p);case 29:return l.t4=l.sent,l.next=32,ct(e,g);case 32:return l.t5=l.sent,y=l.t4+l.t5,l.abrupt("return",f>=y+s+k?{txs:[g,p],ar:y+s+k,chain:0}:"ar");case 35:if(!i){l.next=65;break}return l.next=38,function(e,t){return Pe(void 0,void 0,void 0,I.a.mark((function n(){var r;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ze({query:'\n        query($addr: [String!]!, $chain: [String!]!) {\n          transactions(\n            tags: [\n              { name: "Application", values: "ArLink" }\n              { name: "Chain", values: $chain }\n              { name: "Wallet", values: $addr }\n            ]\n            first: 1\n          ) {\n            edges {\n              node {\n                owner {\n                  address\n                }\n              }\n            }\n          }\n        }\n      ',variables:{addr:e,chain:t}});case 2:return r=n.sent.data.transactions.edges,n.abrupt("return",1===r.length?r[0].node.owner.address:"invalid");case 4:case"end":return n.stop()}}),n)})))}(window.ethereum.selectedAddress,n);case 38:if(l.sent){l.next=40;break}return l.abrupt("return","arLink");case 40:return l.next=42,Xe(e,r,a);case 42:return w=l.sent.chain,S=.005*i,i<1e-6?(i=1e-6,S=1e-6):S<1e-6&&(S=1e-6),T=i+S,l.next=48,window.ethereum.request({method:"eth_getBalance",params:[window.ethereum.selectedAddress,"latest"]});case 48:if(C=l.sent,!((C=parseInt(C,16)/1e18)>=T)){l.next=63;break}return l.t7=n,l.next=54,st(e,c,n,a);case 54:l.t8=l.sent,l.t9=S,l.t10={chain:l.t7,type:"FEE",to:l.t8,value:l.t9},l.t11={chain:n,to:w[n],value:i},l.t12=[l.t10,l.t11],l.t13=T,l.t6={txs:l.t12,ar:0,chain:l.t13},l.next=64;break;case 63:l.t6="chain";case 64:return l.abrupt("return",l.t6);case 65:return l.abrupt("return","invalid");case 66:case"end":return l.stop()}}),l)})))}(this.arweave,this.keyfile,e,t,this.exchangeWallet,this.exchangeContract,n,r,a):new Promise((function(e){return e("keyfile")}))}},{key:"getAssets",value:function(e){return function(e,t,n,r){return Pe(void 0,void 0,void 0,I.a.mark((function a(){var c,s,i,o;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(e){var t={};return e.filter((function(e){return!(e.id in t)&&(t[e.id]=!0)}))},a.t1=[],a.t2=je.a,a.next=5,Qe(e,r);case 5:return a.t3=a.sent,a.t4=(0,a.t2)(a.t3),a.t5=je.a,a.next=10,Ge(e,n,r);case 10:a.t6=a.sent,a.t7=(0,a.t5)(a.t6),a.t8=a.t1.concat.call(a.t1,a.t4,a.t7),c=(0,a.t0)(a.t8),s=[],i=0;case 16:if(!(i<c.length)){a.next=24;break}return a.next=19,Object(Re.a)(e,c[i].id);case 19:(o=a.sent).balances[t]>0&&s.push({id:c[i].id,name:c[i].name,ticker:c[i].ticker,balance:o.balances[t]});case 21:i++,a.next=16;break;case 24:return a.abrupt("return",(s.sort((function(e,t){return t.balance-e.balance})),s));case 25:case"end":return a.stop()}}),a)})))}(this.arweave,e,this.exchangeContract,this.exchangeWallet)}},{key:"getConfig",value:function(e){return Xe(this.arweave,e,this.exchangeWallet)}},{key:"getExchanges",value:function(e){return function(e,t,n,r){return Pe(void 0,void 0,void 0,I.a.mark((function a(){var c,s,i,o,u,l,d,f,b,p;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=[],a.next=3,ze({query:'query($owners: [String!], $num: Int) {\n  transactions(\n    owners: $owners\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: ["Buy", "Sell"] }\n    ]\n    first: $num\n  ) {\n    edges {\n      node {\n        id\n        block {\n          timestamp\n        }\n        quantity {\n          ar\n        }\n        tags {\n          name\n          value\n        }\n      }\n    }\n  }\n}\n',variables:{owners:[t],num:5}});case 3:return s=a.sent.data.transactions.edges,a.next=6,Ge(e,n,r);case 6:return i=a.sent,s.map((function(e){var t,n,r,a,s=e.node,o=null===(t=s.tags.find((function(e){return"Type"===e.name})))||void 0===t?void 0:t.value;if(o){var u="Buy"===o?"Token":"Contract",l=null===(n=s.tags.find((function(e){return e.name===u})))||void 0===n?void 0:n.value,d=null===(r=i.find((function(e){return e.id===l})))||void 0===r?void 0:r.ticker,f="Buy"===o?parseFloat(s.quantity.ar)+" AR":JSON.parse((null===(a=s.tags.find((function(e){return"Input"===e.name})))||void 0===a?void 0:a.value)||"").qty+" "+d,b="??? "+("Buy"===o?d:"AR");c.push({id:s.id,timestamp:s.block?Ne.a.unix(s.block.timestamp).format("YYYY-MM-DD hh:mm:ss"):"not mined yet",type:o,sent:f,received:b,status:"pending",duration:"not completed"})}})),a.next=10,ze({query:'query($owners: [String!], $num: Int) {\n  transactions(\n    owners: $owners\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: ["Swap"] }\n    ]\n    first: $num\n  ) {\n    edges {\n      node {\n        id\n        block {\n          timestamp\n        }\n        quantity {\n          ar\n        }\n        tags {\n          name\n          value\n        }\n      }\n    }\n  }\n}\n',variables:{owners:[t],num:5}});case 10:a.sent.data.transactions.edges.map((function(e){var t,n,r,a=e.node,s=null===(t=a.tags.find((function(e){return"Chain"===e.name})))||void 0===t?void 0:t.value,i=null===(n=a.tags.find((function(e){return"Hash"===e.name})))||void 0===n?void 0:n.value;s&&(i?c.push({id:a.id,timestamp:a.block?Ne.a.unix(a.block.timestamp).format("YYYY-MM-DD hh:mm:ss"):"not mined yet",type:"",sent:(null===(r=a.tags.find((function(e){return"Value"===e.name})))||void 0===r?void 0:r.value)+" "+s,received:"??? AR",status:"pending",duration:"not completed"}):c.push({id:a.id,timestamp:a.block?Ne.a.unix(a.block.timestamp).format("YYYY-MM-DD hh:mm:ss"):"not mined yet",type:"",sent:parseFloat(a.quantity.ar)+" AR",received:"??? "+s,status:"pending",duration:"not completed"}))})),o=0;case 12:if(!(o<c.length)){a.next=33;break}return a.next=15,ze({query:'query($txID: [String!]!) {\n  transactions(\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: "Confirmation" }\n      { name: "Match", values: $txID }\n    ]\n  ) {\n    edges {\n      node {\n        block {\n          timestamp\n        }\n        tags {\n          name\n          value\n        }\n      }\n    }\n  }\n}\n',variables:{txID:c[o].id}});case 15:if(u=a.sent.data.transactions.edges,a.t0=u[0],a.t0){a.next=21;break}return a.next=20,ze({query:'query($txID: [String!]!) {\n  transactions(\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: "Confirmation" }\n      { name: "Swap", values: $txID }\n    ]\n  ) {\n    edges {\n      node {\n        block {\n          timestamp\n        }\n        tags {\n          name\n          value\n        }\n      }\n    }\n  }\n}\n',variables:{txID:c[o].id}});case 20:u=a.sent.data.transactions.edges;case 21:if(!u[0]){a.next=25;break}c[o].status="success",u[0].node.block?(l=Ne()(c[o].timestamp),d=Ne()(Ne.a.unix(u[0].node.block.timestamp).format("YYYY-MM-DD hh:mm:ss")),f=Ne.a.duration(d.diff(l)),c[o].duration=f.humanize()):c[o].duration="not mined yet",(b=u[0].node.tags.find((function(e){return"Received"===e.name})))&&(p=b.value.split(" "),c[o].received=parseFloat(parseFloat(p[0]).toFixed(5))+" "+p[1]);case 25:return a.next=27,ze({query:'query($txID: [String!]!) {\n  transactions(\n    tags: [\n      { name: "Exchange", values: "Verto" }\n      { name: "Type", values: "Cancel" }\n      { name: "Order", values: $txID }\n    ]\n  ) {\n    edges {\n      node {\n        id\n      }\n    }\n  }\n}\n',variables:{txID:c[o].id}});case 27:if(a.t1=a.sent.data.transactions.edges[0],!a.t1){a.next=30;break}c[o].status="failed",c[o].duration="cancelled";case 30:o++,a.next=12;break;case 33:return a.abrupt("return",c.sort((function(e,t){return Ne()(t.timestamp).unix()-Ne()(e.timestamp).unix()})).slice(0,5));case 34:case"end":return a.stop()}}),a)})))}(this.arweave,e,this.exchangeContract,this.exchangeWallet)}},{key:"getPostStake",value:function(e){return Ve(this.arweave,e,this.exchangeContract)}},{key:"getReputation",value:function(e){return Be(this.arweave,e,this.exchangeContract)}},{key:"getTokens",value:function(){return Ge(this.arweave,this.exchangeContract,this.exchangeWallet)}},{key:"getTPTokens",value:function(e){return function(e,t,n,r){return Pe(void 0,void 0,void 0,I.a.mark((function a(){var c,s;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Xe(e,t,r);case 2:return c=a.sent,a.t0=[],a.t1=je.a,a.next=7,Qe(e,r);case 7:return a.t2=a.sent,a.t3=(0,a.t1)(a.t2),a.t4=je.a,a.next=12,Ge(e,n,r);case 12:return a.t5=a.sent,a.t6=(0,a.t4)(a.t5),s=a.t0.concat.call(a.t0,a.t3,a.t6),a.abrupt("return",(c.blockedTokens.map((function(e){var t=s.find((function(t){return t.id===e})),n=-1;t&&(n=s.indexOf(t)),n>-1&&s.splice(n,1)})),function(e){var t={};return e.filter((function(e){return!(e.id in t)&&(t[e.id]=!0)}))}(s)));case 16:case"end":return a.stop()}}),a)})))}(this.arweave,e,this.exchangeContract,this.exchangeWallet)}},{key:"getTradingPosts",value:function(){return Je(this.arweave,this.exchangeContract,this.exchangeWallet)}},{key:"getTransactions",value:function(e){return function(e,t){return Pe(void 0,void 0,void 0,I.a.mark((function n(){var r,a,c,s,i;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=[],n.next=3,e.network.getInfo();case 3:return a=n.sent.height,n.next=6,ze({query:it,variables:{owners:[t],block:a}});case 6:return c=n.sent.data.transactions.edges,n.next=9,ze({query:it,variables:{recipients:[t],block:a}});case 9:s=n.sent.data.transactions.edges,c.map((function(e){var t=e.node;r.push({id:t.id,amount:parseFloat(parseFloat(t.quantity.ar).toFixed(2)),type:"out",status:"",timestamp:t.block.timestamp})})),s.map((function(e){var t=e.node;r.push({id:t.id,amount:parseFloat(parseFloat(t.quantity.ar).toFixed(2)),type:"in",status:"",timestamp:t.block.timestamp})})),r.sort((function(e,t){return t.timestamp-e.timestamp})),r=r.slice(0,5),i=0;case 12:if(!(i<r.length)){n.next=30;break}return n.prev=13,n.next=16,e.transactions.getStatus(r[i].id);case 16:if(n.t0=n.sent.status,200!==n.t0){n.next=21;break}r[i].status="success",n.next=22;break;case 21:r[i].status="pending";case 22:n.next=27;break;case 24:n.prev=24,n.t1=n.catch(13),console.log(n.t1);case 27:i++,n.next=12;break;case 30:return n.abrupt("return",r);case 31:case"end":return n.stop()}}),n,null,[[13,24]])})))}(this.arweave,e)}},{key:"latestChainRate",value:function(e){return function(e,t,n,r){return Pe(void 0,void 0,void 0,I.a.mark((function a(){var c;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ue(e,t,n,r);case 2:return c=a.sent,a.abrupt("return",c.rates[c.rates.length-1]);case 4:case"end":return a.stop()}}),a)})))}(this.arweave,e,this.exchangeContract,this.exchangeWallet)}},{key:"latestPrice",value:function(e){return function(e,t,n,r){return Pe(void 0,void 0,void 0,I.a.mark((function a(){var c;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,et(e,t,n,r);case 2:if(!(c=a.sent)){a.next=5;break}return a.abrupt("return",c.prices[c.prices.length-1]);case 5:case"end":return a.stop()}}),a)})))}(this.arweave,e,this.exchangeContract,this.exchangeWallet)}},{key:"latestVolume",value:function(e){return function(e,t,n,r){return Pe(void 0,void 0,void 0,I.a.mark((function a(){var c,s,i,o,u;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Je(e,n,r);case 2:return c=a.sent,a.next=5,ze({query:He,variables:{recipients:c,token:t,num:_e}});case 5:if(s=a.sent.data.transactions.edges,i=[],s.map((function(e){var t=e.node,n=t.tags.find((function(e){return"Input"===e.name}));n&&i.push({amnt:JSON.parse(n.value).qty,timestamp:t.block.timestamp})})),!(i.length>0)){a.next=10;break}return o=Ne()().add(1,"days").hours(0).minutes(0).seconds(0),u=o.clone().subtract(1,"days"),a.abrupt("return",i.filter((function(e){return e.timestamp<=o.unix()&&e.timestamp>=u.unix()})).map((function(e){return e.amnt})).reduce((function(e,t){return e+t}),0));case 10:return a.abrupt("return",0);case 11:case"end":return a.stop()}}),a)})))}(this.arweave,e,this.exchangeContract,this.exchangeWallet)}},{key:"popularTokens",value:function(){return Qe(this.arweave,this.exchangeWallet)}},{key:"price",value:function(e){return et(this.arweave,e,this.exchangeContract,this.exchangeWallet)}},{key:"recommendPost",value:function(){return e=this.arweave,t=this.exchangeContract,n=this.exchangeWallet,Pe(void 0,void 0,void 0,I.a.mark((function r(){var a,c,s,i,o,u,l,d,f,b,p;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Je(e,t,n);case 2:a=r.sent,c={},s=0,i=Object(De.a)(a),r.prev=6,i.s();case 8:if((o=i.n()).done){r.next=16;break}return u=o.value,r.next=12,Be(e,u,t);case 12:l=r.sent,c[u]=l,s+=l;case 14:r.next=8;break;case 16:r.next=21;break;case 18:r.prev=18,r.t0=r.catch(6),i.e(r.t0);case 21:return r.prev=21,i.f(),r.finish(21);case 24:d={},f=Object(De.a)(a);try{for(f.s();!(b=f.n()).done;)p=b.value,d[p]=c[p]/s}catch(j){f.e(j)}finally{f.f()}return r.abrupt("return",tt(d));case 28:case"end":return r.stop()}}),r,null,[[6,18,21,24]])})));var e,t,n}},{key:"saveToken",value:function(e){return this.keyfile?function(e,t,n,r,a){return Pe(void 0,void 0,void 0,I.a.mark((function c(){var s,i,u,l,d,f,b,p;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if("undefined"==typeof window){c.next=28;break}return c.next=3,Ge(e,r,a);case 3:if(c.sent.find((function(e){return e.id===t}))){c.next=27;break}return c.t0=ze,c.t1=a,c.next=8,e.wallets.jwkToAddress(n);case 8:return c.t2=c.sent,c.t3=t,c.t4={exchange:c.t1,user:c.t2,contract:c.t3},c.t5={query:'\n            query($exchange: String!, $user: String!, $contract: [String!]!) {\n              transactions(\n                owners: [$user]\n                recipients: [$exchange]\n                tags: [\n                  { name: "Exchange", values: "Verto" }\n                  { name: "Type", values: "Token" }\n                  { name: "Contract", values: $contract }\n                ]\n                first: 2147483647\n              ) {\n                edges {\n                  node {\n                    owner {\n                      address\n                    }\n                  }\n                }\n              }\n            }\n          ',variables:c.t4},c.next=14,(0,c.t0)(c.t5);case 14:if(c.t6=c.sent.data.transactions.edges.length,0!==c.t6){c.next=25;break}return s={Exchange:"Verto",Type:"Token",Contract:t},c.next=19,e.createTransaction({target:a,data:Math.random().toString().slice(-4)},n);case 19:for(i=c.sent,u=0,l=Object.entries(s);u<l.length;u++)d=Object(o.a)(l[u],2),f=d[0],b=d[1],i.addTag(f,b);return c.next=23,e.transactions.sign(i,n);case 23:return c.next=25,e.transactions.post(i);case 25:(p=JSON.parse(localStorage.getItem("tokens")||"[]")).push(t),localStorage.setItem("tokens",JSON.stringify(p));case 27:return c.abrupt("return",t);case 28:case"end":return c.stop()}}),c)})))}(this.arweave,e,this.keyfile,this.exchangeContract,this.exchangeWallet):new Promise((function(e){return e()}))}},{key:"sendOrder",value:function(e){return this.keyfile?function(e,t,n){return Pe(void 0,void 0,void 0,I.a.mark((function r(){var a,c,s;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=Object(De.a)(n),r.prev=1,a.s();case 3:if((c=a.n()).done){r.next=11;break}return s=c.value,r.next=7,e.transactions.sign(s,t);case 7:return r.next=9,e.transactions.post(s);case 9:r.next=3;break;case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(1),a.e(r.t0);case 16:return r.prev=16,a.f(),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[1,13,16,19]])})))}(this.arweave,this.keyfile,e):new Promise((function(e){return e("keyfile")}))}},{key:"sendSwap",value:function(e){return this.keyfile?function(e,t,n){return Pe(void 0,void 0,void 0,I.a.mark((function r(){var a,c,s;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=Object(De.a)(n),r.prev=1,a.s();case 3:if((c=a.n()).done){r.next=21;break}if(!(s=c.value).id){r.next=12;break}return r.next=8,e.transactions.sign(s,t);case 8:return r.next=10,e.transactions.post(s);case 10:r.next=19;break;case 12:if(r.t0="ETH"===s.chain&&"undefined"!=typeof window&&void 0!==window.ethereum,!r.t0){r.next=19;break}return s.value*=1e18,r.next=17,window.ethereum.request({method:"eth_requestAccounts"});case 17:return r.next=19,window.ethereum.request({method:"eth_sendTransaction",params:[{to:s.to,from:window.ethereum.selectedAddress,value:s.value.toString(16)}]});case 19:r.next=3;break;case 21:r.next=26;break;case 23:r.prev=23,r.t1=r.catch(1),a.e(r.t1);case 26:return r.prev=26,a.f(),r.finish(26);case 29:case"end":return r.stop()}}),r,null,[[1,23,26,29]])})))}(this.arweave,this.keyfile,e):new Promise((function(e){return e("keyfile")}))}},{key:"volume",value:function(e){return Ke(this.arweave,e,this.exchangeContract,this.exchangeWallet)}}]),e}(),ut=function(){var e=Object(D.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ot(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lt=function(){var e=Object(D.a)(I.a.mark((function e(t,n){var r,a,c,s,i,o,u,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(n);case 2:return r=e.sent,e.next=5,r.getTradingPosts();case 5:return a=e.sent,e.next=8,r.getConfig(a[0]);case 8:if(!(c=e.sent).hasOwnProperty("publicURL")){e.next=29;break}return e.next=12,fetch("https://".concat(c.publicURL,"/orders"));case 12:return e.next=14,e.sent.json();case 14:return s=e.sent,e.prev=15,i=s.find((function(e){return e.token===t})).orders.filter((function(e){return"Sell"===e.type})).sort((function(e,t){return t.rate-e.rate})),o=i.reduce((function(e,t){return e+t.amnt}),0),u=i.reduce((function(e,t){return e+t.amnt/o*t.rate}),0),l=i.map((function(e){return{rate:1/e.rate,amount:e.amnt}})),e.abrupt("return",{volume:o,averageRate:1/u,rates:l});case 23:return e.prev=23,e.t0=e.catch(15),console.log(e.t0),e.abrupt("return",{volume:0,averageRate:0,rates:[]});case 27:e.next=30;break;case 29:return e.abrupt("return",{volume:0,averageRate:0,rates:[]});case 30:case"end":return e.stop()}}),e,null,[[15,23]])})));return function(t,n){return e.apply(this,arguments)}}(),dt=function(){var e=Object(D.a)(I.a.mark((function e(t,n){var r,a,c,s,i,o,u,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(n);case 2:return r=e.sent,e.next=5,r.getTradingPosts();case 5:return a=e.sent,e.next=8,r.getConfig(a[0]);case 8:if(!(c=e.sent).hasOwnProperty("publicURL")){e.next=29;break}return e.next=12,fetch("https://".concat(c.publicURL,"/orders"));case 12:return e.next=14,e.sent.json();case 14:return s=e.sent,e.prev=15,i=s.find((function(e){return e.token===t})).orders.filter((function(e){return"Buy"===e.type})).sort((function(e,t){return e.rate-t.rate})),o=i.reduce((function(e,t){return e+t.amnt}),0),u=i.reduce((function(e,t){return e+t.amnt/o*t.rate}),0),l=i.map((function(e){return{rate:e.rate,amount:e.amnt}})),e.abrupt("return",{volume:o,averageRate:u,rates:l});case 23:return e.prev=23,e.t0=e.catch(15),console.log(e.t0),e.abrupt("return",{volume:0,averageRate:0,rates:[]});case 27:e.next=30;break;case 29:return e.abrupt("return",{volume:0,averageRate:0,rates:[]});case 30:case"end":return e.stop()}}),e,null,[[15,23]])})));return function(t,n){return e.apply(this,arguments)}}(),ft=function(){var e=Object(D.a)(I.a.mark((function e(t,n,r,a){var c,s,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(r);case 2:return c=e.sent,e.next=5,c.getTradingPosts();case 5:return s=e.sent,e.next=8,c.createOrder(t,n,a,s[0]);case 8:return i=e.sent,console.log(i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),bt=function(){var e=Object(D.a)(I.a.mark((function e(t,n){var r,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(n);case 2:return r=e.sent,e.next=5,r.sendOrder(t);case 5:return a=e.sent,console.log(a),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pt=function(e){var t=e.contractID,n=e.ticker,a=e.balance,s=c.a.useState(!1),i=Object(o.a)(s,2),u=i[0],l=i[1],b=c.a.useState({}),x=Object(o.a)(b,2),h=x[0],v=x[1],m=c.a.useState(""),O=Object(o.a)(m,2),g=O[0],k=O[1],w=c.a.useState(0),T=Object(o.a)(w,2),C=T[0],A=T[1],E=c.a.useState(0),q=Object(o.a)(E,2),R=q[0],M=q[1],N=c.a.useContext(S).state,$=c.a.useState(""),W=Object(o.a)($,2),z=W[0],L=W[1],_=c.a.useState(0),V=Object(o.a)(_,2),B=V[0],J=V[1],Y=c.a.useState({}),U=Object(o.a)(Y,2),H=U[0],K=U[1];c.a.useEffect((function(){l(!0);var e=!0;return function(){var n=Object(D.a)(I.a.mark((function n(){var r,a,c;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,lt(t,N.key);case 2:return r=n.sent,n.next=5,dt(t,N.key);case 5:if(a=n.sent,!e){n.next=9;break}return n.next=9,v({buy:r,sell:a});case 9:if(!e){n.next=15;break}return l(!1),n.next=13,ft("Buy",Math.floor(parseFloat(N.balance)),N.key,t);case 13:c=n.sent,e&&M(c.ar);case 15:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){e=!1}}),[]);var G=function(){var e=Object(D.a)(I.a.mark((function e(){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==C){e.next=3;break}return e.next=3,Q();case 3:return e.next=5,ft("Buy",C,N.key,t);case 5:return n=e.sent,e.next=8,K(n);case 8:k(""),console.log(H);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(D.a)(I.a.mark((function e(){var t,n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=parseInt(g)){e.next=6;break}return A(0),e.abrupt("return");case 6:n=0,r=0;case 8:if(!(r<h.buy.rates.length)){e.next=19;break}if(!(h.buy.rates[r].amount<t)){e.next=14;break}n+=h.buy.rates[r].amount*h.buy.rates[r].rate,t-=h.buy.rates[r].amount,e.next=16;break;case 14:return n+=h.buy.rates[r].rate*t,e.abrupt("break",19);case 16:r++,e.next=8;break;case 19:A(n);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(D.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt(H.txs,N.key);case 2:t=e.sent,K({}),console.log(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(D.a)(I.a.mark((function e(){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==B){e.next=3;break}return e.next=3,ee();case 3:return e.next=5,ft("Sell",parseInt(z),N.key,t);case 5:return n=e.sent,e.next=8,K(n);case 8:console.log(H),L("");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(D.a)(I.a.mark((function e(){var t,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=parseInt(z)){e.next=4;break}return J(0),e.abrupt("return");case 4:n=0,h.sell.rates.every((function(e){return t>e.amount?(n+=e.amount*e.rate,t-=e.amount,!0):(n+=t*e.rate,!1)})),J(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(d.c,{align:"center",children:[Object(r.jsx)(f.a,{size:"sm",children:"Verto Exchange"}),u&&Object(r.jsx)(we.a,{h:"100px",children:Object(r.jsx)(p.a,{})}),!u&&Object(r.jsxs)(j.a,{children:[Object(r.jsxs)(f.a,{size:"sm",children:["Buy ",n]}),Object(r.jsx)(ke.a,{}),h.buy&&h.buy.volume>0?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(P.a,{children:["Average Buy Price: ",h.buy.averageRate.toLocaleString(void 0,{maximumFractionDigits:6})," ",n,"/AR"]}),Object(r.jsxs)(P.a,{children:["Total Available ",n,": ",h.buy.volume]}),Object(r.jsxs)(P.a,{children:["Total AR you can spend: ",R]}),Object(r.jsxs)(d.a,{children:[Object(r.jsx)(F.a,{placeholder:"Enter amount",w:"50%",value:g,onChange:function(e){return k(e.target.value)},onBlur:Q}),Object(r.jsxs)(P.a,{children:["Cost in AR: ",C]}),Object(r.jsx)(Se.a,{closeOnBlur:!1,children:function(e){var t=e.onClose;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Se.g,{children:Object(r.jsx)(y.a,{disabled:!g||parseInt(g)<=0||NaN===parseInt(g),onClick:G,children:"Buy"})}),Object(r.jsxs)(Se.e,{children:[Object(r.jsx)(Se.b,{}),Object(r.jsx)(Se.d,{}),Object(r.jsx)(Se.f,{children:"Order Confirmation"}),Object(r.jsx)(Se.c,{children:Object(r.jsxs)(d.c,{children:[Object(r.jsxs)(P.a,{children:["Transaction Cost: ",H.ar]}),Object(r.jsxs)(P.a,{children:[n," received: ",g]}),Object(r.jsxs)(P.a,{children:["Wallet balance after transaction: ",parseFloat(N.balance)-H.ar]}),Object(r.jsx)(y.a,{onClick:function(){X(),t()},children:"Submit Order"})]})})]})]})}})]})]}):Object(r.jsx)(P.a,{children:"No open buy orders"}),Object(r.jsxs)(f.a,{size:"sm",children:["Sell ",n]}),Object(r.jsx)(ke.a,{}),h.sell&&h.sell.volume>0?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(P.a,{children:["Average Sell Price: ",h.sell.averageRate.toLocaleString(void 0,{maximumFractionDigits:6})," ",n,"/AR"]}),Object(r.jsxs)(P.a,{children:["Total of open orders: ",h.sell.volume," ",n]}),Object(r.jsxs)(d.a,{children:[Object(r.jsx)(F.a,{placeholder:"Enter amount",value:z,invalid:parseInt(z)>parseInt(a),onChange:function(e){return L(e.target.value)},onBlur:ee}),Object(r.jsxs)(P.a,{children:["Amount in AR: ",B]}),Object(r.jsx)(Se.a,{closeOnBlur:!1,children:function(e){var t=e.onClose;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Se.g,{children:Object(r.jsx)(y.a,{disabled:parseInt(z)>parseInt(a)||parseInt(z)<=0,onClick:Z,children:"Sell"})}),Object(r.jsxs)(Se.e,{children:[Object(r.jsx)(Se.b,{}),Object(r.jsx)(Se.d,{}),Object(r.jsx)(Se.f,{children:"Order Confirmation"}),Object(r.jsx)(Se.c,{children:Object(r.jsxs)(d.c,{children:[Object(r.jsxs)(P.a,{children:["Transaction Cost: ",H.pst," ",n]}),Object(r.jsxs)(P.a,{children:["AR received: ",B]}),Object(r.jsxs)(P.a,{children:["Wallet balance after transaction: ",parseFloat(N.balance)+B]}),Object(r.jsx)(y.a,{onClick:function(){X(),t()},children:"Submit Order"})]})})]})]})}})]})]}):Object(r.jsx)(P.a,{children:"No open sell orders"})]})]})},jt=function(e){var t=c.a.useState(0),n=Object(o.a)(t,2),a=n[0],s=n[1],i=c.a.useState(!1),u=Object(o.a)(i,2),l=u[0],f=u[1];return c.a.useEffect((function(){for(var t=!0,n=0,r=0,a=Object.entries(e.balances);r<a.length;r++){var c=Object(o.a)(a[r],2);c[0];n+=c[1]}return t&&s(n),function(){t=!1}}),[e]),Object(r.jsxs)(j.a,{w:"100%",children:[Object(r.jsx)(j.a,{bg:"white",border:"1px",borderColor:"grey",onClick:function(){return f(!l)},children:Object(r.jsxs)(P.a,{children:["All balances - ",a," in circulation"]})}),Object(r.jsx)(_.a,{in:l,children:Object.entries(e.balances).map((function(e){return Object(r.jsxs)(d.a,{w:"100%",children:[Object(r.jsxs)(P.a,{maxWidth:"200px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:[e[0],":"]},e[0]),Object(r.jsx)(P.a,{children:e[1].toString()},e[0]+e[0])]},e[0]+1)}))})]})},xt=function(e){var t=e.vault,n=c.a.useState(0),a=Object(o.a)(n,2),s=a[0],i=a[1],u=Object($.a)(),l=u.isOpen,f=u.onToggle;return c.a.useEffect((function(){for(var e=!0,n=0,r=0,a=Object.entries(t);r<a.length;r++){var c=Object(o.a)(a[r],2),s=(c[0],c[1]);s[0]&&(n+=s[0].balance)}return e&&i(n),function(){e=!1}}),[t]),Object(r.jsxs)(j.a,{w:"100%",children:[Object(r.jsx)(j.a,{bg:"white",border:"1px",borderColor:"grey",onClick:f,children:Object(r.jsxs)(P.a,{children:["Vaulted balances: ",s]})}),Object(r.jsx)(_.a,{in:l,children:Object.keys(t).map((function(e){return t[e].length>0?t[e].map((function(t,n){return Object(r.jsxs)(j.a,{fontSize:12,children:[Object(r.jsxs)(P.a,{maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:["Address: ",e]},e),Object(r.jsxs)(d.a,{children:[Object(r.jsxs)(P.a,{children:["Balance: ",t.balance]},t.toString()),Object(r.jsxs)(P.a,{children:["End Block: ",t.end]},t.start+t.end+e)]})]},e+n)})):null}))})]})},ht=function(e){var t=e.isOpen,n=e.close,a=e.contractState,s=c.a.useContext(S).state,i=c.a.useState([]),u=Object(o.a)(i,2),l=u[0],b=u[1],p=c.a.useState(""),j=Object(o.a)(p,2),x=j[0],h=j[1];return c.a.useEffect((function(){var e=!0;console.log(a);var t=function(){var t=Object(D.a)(I.a.mark((function t(n){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Promise.all(n[s.address].map(function(){var e=Object(D.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=null===t||void 0===t?void 0:t.end)){e.next=6;break}return e.next=4,ae(s.blockHeight?s.blockHeight:0,n);case 4:return r=e.sent,e.abrupt("return",{balance:t.balance,message:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:r=t.sent,e&&b(r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a.vault&&a.vault[s.address]&&t(a.vault),function(){e=!1}}),[a]),c.a.useEffect((function(){var e;try{a.settings&&(e=a.settings.filter((function(e){return"communityLogo"===e[0]}))[0][1]),h(e)}catch(t){console.log("error loading logo"),console.log(t)}return e&&h(e),function(){h("")}}),[a]),Object(r.jsx)(r.Fragment,{children:a.balances&&Object(r.jsxs)(Ce.a,{isOpen:t,placement:"right",onClose:n,size:"full",children:[Object(r.jsx)(O.h,{}),Object(r.jsxs)(Ce.b,{children:[Object(r.jsx)(O.c,{onClick:n}),Object(r.jsxs)(O.g,{children:[a.name&&Object(r.jsx)(f.a,{size:"md",children:a.name}),Object(r.jsxs)(d.a,{children:[Object(r.jsx)(P.a,{children:a.ticker}),""!==x&&Object(r.jsx)(Ae.a,{src:"https://arweave.net/".concat(x)})]})]}),Object(r.jsxs)(O.b,{children:[Object(r.jsxs)(d.b,{children:[Object(r.jsxs)(P.a,{children:["Balance: ",a.balances[s.address]?a.balances[s.address]:0]}),l.map((function(e,t){return Object(r.jsxs)(d.a,{children:[Object(r.jsxs)(P.a,{children:["Vaulted Balance: ",e.balance]},t+e.toString()),Object(r.jsx)(P.a,{children:e.message},t+e.message)]})})),Object(r.jsx)(pt,{contractID:a.contractID,ticker:a.ticker,balance:a.balances[s.address]})]}),a.balances&&Object(r.jsx)(jt,{balances:a.balances}),a.vault&&Object(r.jsx)(xt,{vault:a.vault})]}),Object(r.jsx)(O.f,{mb:{base:"25%",sm:"25%",md:"25%",lg:0,xl:0},children:Object(r.jsx)(y.a,{variant:"outline",onClick:n,mr:3,children:"Close"})})]})]})})},vt=n(824),mt=n(825),Ot=function(e){var t=Object(a.useState)(e.props.modal),n=Object(o.a)(t,2),s=n[0],i=n[1],u=c.a.useContext(S).state,l=Object(a.useState)(""),f=Object(o.a)(l,2),b=f[0],p=f[1],j=Object(a.useState)("0"),x=Object(o.a)(j,2),h=x[0],v=x[1],m=Object(a.useState)(""),g=Object(o.a)(m,2),k=g[0],w=g[1],T=Object(a.useState)(!1),C=Object(o.a)(T,2),A=C[0],E=C[1],q=Object(a.useState)(!0),R=Object(o.a)(q,2),M=R[0],$=R[1],W=Object(N.a)(),z=function(){ee(0).then((function(e){return v(e)})).catch((function(){return W({title:"Error",status:"error",duration:3e3,position:"bottom-left",description:"Error getting fee, check your network connection and try again"})}))};Object(a.useEffect)((function(){i(e.props.modal),z()}),[e.props.modal]);var L=function(){var e=Object(D.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te({to:k,fee:h,txnId:"",amount:b},u.key),i(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(D.a)(I.a.mark((function e(){var t,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=parseFloat(u.balance),n=t-parseFloat(h),p(n.toString());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(O.a,{closeOnOverlayClick:!1,isCentered:!0,isOpen:s,onClose:function(){i(!1),e.props.closeModal()},children:[Object(r.jsx)(O.h,{}),Object(r.jsxs)(O.d,{children:[Object(r.jsx)(O.g,{children:"Send AR"}),Object(r.jsx)(O.c,{}),Object(r.jsx)(O.b,{children:Object(r.jsxs)(d.b,{spacing:2,children:[Object(r.jsxs)(d.b,{children:[Object(r.jsx)(P.a,{children:"From:"}),Object(r.jsx)(P.a,{fontSize:14,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:u.address})]}),!A&&Object(r.jsx)(a.Fragment,{children:Object(r.jsxs)(d.b,{spacing:2,children:[Object(r.jsxs)(me.a,{isInvalid:k===u.address,children:[Object(r.jsx)(F.a,{placeholder:"Send to Arweave wallet address",value:k,onChange:function(e){return w(e.target.value)},onBlur:z,isInvalid:k===u.address}),Object(r.jsx)(Oe.a,{children:"Recipient address cannot be the same as the sending address"})]}),Object(r.jsxs)(me.a,{isInvalid:!M,children:[Object(r.jsxs)(vt.a,{children:[Object(r.jsx)(F.a,{placeholder:"Amount",value:b,onChange:function(e){return p(e.target.value)},onBlur:function(){$(""===b||parseFloat((parseFloat(u.balance)-parseFloat(h)-parseFloat(b)).toFixed(12))>=0)},isInvalid:!M}),Object(r.jsx)(mt.a,{children:"AR"})]}),Object(r.jsx)(Oe.a,{children:"Amount cannot be greater than wallet balance"})]}),Object(r.jsx)(y.a,{border:"none",onClick:_,children:"Use Wallet Balance"}),Object(r.jsxs)(P.a,{children:["Fee: ",h," AR"]}),Object(r.jsxs)(P.a,{children:["Total (including fee): ",(parseFloat(h)+parseFloat(b||"0")).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:"0"!==h?h.split(".")[1].length:1})," AR"]})]})}),A&&Object(r.jsx)(a.Fragment,{children:Object(r.jsxs)(d.b,{spacing:2,children:[Object(r.jsxs)(d.b,{children:[Object(r.jsx)(P.a,{children:"To:"}),Object(r.jsx)(P.a,{fontSize:14,children:k})]}),Object(r.jsxs)(d.b,{isInline:!0,children:[Object(r.jsxs)(d.b,{children:[Object(r.jsx)(P.a,{children:"Sending"}),Object(r.jsxs)(P.a,{children:[b," AR"]})]}),Object(r.jsxs)(d.b,{children:[Object(r.jsx)(P.a,{children:"Fee"}),Object(r.jsxs)(P.a,{children:[h," AR"]})]})]}),Object(r.jsxs)(d.b,{children:[Object(r.jsx)(P.a,{children:"Total"}),Object(r.jsxs)(P.a,{children:[(parseFloat(h)+parseFloat(b||"0")).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:"0"!==h?h.split(".")[1].length:1})," AR"]})]}),Object(r.jsxs)(d.b,{children:[Object(r.jsx)(P.a,{children:"Balance after transaction"}),Object(r.jsxs)(P.a,{children:[(parseFloat(u.balance)-parseFloat(h)-parseFloat(b)).toString()," AR"]})]})]})})]})}),Object(r.jsx)(O.f,{children:A?Object(r.jsx)(y.a,{bg:"#333",color:"white",w:"100%",onClick:function(){L(),i(!1),e.props.closeModal()},children:"Confirm and Send AR"}):Object(r.jsx)(y.a,{bg:"#333",color:"white",w:"100%",isDisabled:!M||""===k,onClick:function(){return E(!0)},children:"Next"})})]})]})},gt=function(e){var t=e.close,n=c.a.useContext(S),a=n.state,s=n.dispatch,i=c.a.useState(""),u=Object(o.a)(i,2),l=u[0],b=u[1],j=c.a.useState(!1),x=Object(o.a)(j,2),h=x[0],v=x[1],m=c.a.useState(!0),O=Object(o.a)(m,2),g=O[0],k=O[1],w=Object(N.a)(),T=function(){var e=Object(D.a)(I.a.mark((function e(){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!0),n=Object(je.a)(a.tokens),!a.tokenAddresses||a.tokenAddresses.find((function(e){return e===l}))){e.next=24;break}return e.prev=3,e.next=6,X(l);case 6:r=e.sent,n.push(r),s({type:"UPDATE_TOKENS",payload:{tokens:n}}),b(""),v(!1),t(),e.next=22;break;case 14:e.prev=14,e.t0=e.catch(3),console.log("error adding token"),console.log(e.t0),w({title:"Error loading token",status:"error",duration:3e3,position:"bottom",description:"Please check contract ID and try again"}),b(""),v(!1),t();case 22:e.next=25;break;case 24:w({title:"Token already in list",status:"error",duration:3e3,position:"bottom",description:"Please check contract ID and try again"});case 25:b(""),v(!1),t();case 28:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(d.b,{children:[Object(r.jsx)(f.a,{size:"sm",children:"Add Custom Token"}),Object(r.jsxs)(me.a,{isInvalid:!g,children:[Object(r.jsxs)(d.b,{isInline:!0,children:[Object(r.jsx)(F.a,{placeholder:"Contract ID",onChange:function(e){b(e.target.value)},onBlur:function(){return console.log(a.tokens),void(a.tokens.find((function(e){return e&&e.hasOwnProperty("contract")&&e.contract===l}))?k(!1):k(!0))}}),Object(r.jsx)(y.a,{isDisabled:h||!g||""===l,onClick:function(){return T()},children:"Add Token"}),h&&Object(r.jsx)(p.a,{})]}),Object(r.jsx)(Oe.a,{children:"Token already loaded"})]})]})},kt=function(){var e=c.a.useContext(S),t=e.state,n=e.dispatch,a=c.a.useState(!1),s=Object(o.a)(a,2),i=s[0],u=s[1],l=c.a.useState(""),b=Object(o.a)(l,2),v=b[0],m=b[1],O=c.a.useState(0),g=Object(o.a)(O,2),k=g[0],w=g[1],T=c.a.useState(""),C=Object(o.a)(T,2),E=C[0],q=C[1],R=c.a.useState(!1),M=Object(o.a)(R,2),$=M[0],W=M[1],z=c.a.useState(!1),L=Object(o.a)(z,2),_=L[0],V=L[1],B=Object(N.a)(),J=c.a.useState(!1),Y=Object(o.a)(J,2),U=Y[0],H=Y[1],K=c.a.useState({}),G=Object(o.a)(K,2),Q=G[0],Z=G[1],te=c.a.useState(t.tokens),re=Object(o.a)(te,2),ae=re[0],se=re[1],ie=c.a.useState("balances"),oe=Object(o.a)(ie,2),ue=oe[0],le=oe[1];c.a.useEffect((function(){ee(new Blob([Math.random().toString().slice(-4)]).size).then((function(e){return q(e)}))}),[]),c.a.useEffect((function(){if(t.address&&t.tokens)switch(ue){case"all":se(t.tokens.sort((function(e,t){if(!t.contractState&&!e.contractState)return 0;var n=e.ticker.toUpperCase(),r=t.ticker.toUpperCase();return n>r?1:r>n?-1:0})));break;case"balances":se(t.tokens.filter((function(e){return e&&e.contractState&&e.contractState.balances[t.address]>0})));break;case"distribution":se(t.tokens.sort((function(e,t){if(!t.contractState&&!e.contractState)return 0;var n=Object.keys(e.contractState.balances).length,r=Object.keys(t.contractState.balances).length;return n<r?1:r<n?-1:0})));break;default:se(t.tokens)}}),[t.tokens,ue]),c.a.useEffect((function(){function e(){return r.apply(this,arguments)}function r(){return(r=Object(ve.a)(I.a.mark((function e(){var n,r,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.tokenAddresses){e.next=8;break}n=I.a.mark((function e(n){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.tokens.find((function(e){return e.contract===t.tokenAddresses[n]}))){e.next=13;break}return e.prev=1,e.next=4,Object(he.a)(X(t.tokenAddresses[n]));case 4:return r=e.sent,e.next=7,r;case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("error loading token"),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})),r=0;case 3:if(!(r<(null===(a=t.tokenAddresses)||void 0===a?void 0:a.length))){e.next=8;break}return e.delegateYield(n(r),"t0",5);case 5:r++,e.next=3;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){var r=Object(D.a)(I.a.mark((function r(){var a,c,s,i,o,u,l,d;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=[],V(!0),c=!0,s=!1,r.prev=4,o=Object(xe.a)(e());case 6:return r.next=8,o.next();case 8:return u=r.sent,c=u.done,r.next=12,u.value;case 12:if(l=r.sent,c){r.next=20;break}d=l,console.log(d),a.push(d);case 17:c=!0,r.next=6;break;case 20:r.next=26;break;case 22:r.prev=22,r.t0=r.catch(4),s=!0,i=r.t0;case 26:if(r.prev=26,r.prev=27,c||null==o.return){r.next=31;break}return r.next=31,o.return();case 31:if(r.prev=31,!s){r.next=34;break}throw i;case 34:return r.finish(31);case 35:return r.finish(26);case 36:V(!1),n({type:"UPDATE_TOKENS",payload:{tokens:a}}),Object(x.b)("wallets",JSON.stringify(t));case 39:case"end":return r.stop()}}),r,null,[[4,22,26,36],[27,,31,35]])})));return function(){return r.apply(this,arguments)}})()()}),[t.tokenAddresses]),c.a.useEffect((function(){(function(){var e=Object(D.a)(I.a.mark((function e(){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:r=e.sent,n({type:"SET_TOKEN_ADDRESSES",payload:{tokenAddresses:r}}),console.log(t.tokenAddresses);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var de=function(){var e=Object(D.a)(I.a.mark((function e(n,r){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),e.next=3,ne(n.contract,k,v,t.key);case 3:a=e.sent,W(!1),r(),B({title:"Transaction Status - ".concat(a),status:"info",duration:3e3,position:"bottom"});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.jsxs)(j.a,{textAlign:"left",children:[Object(r.jsxs)(P.a,{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:["Address: ",t.address]}),Object(r.jsxs)(ge.a,{columns:3,my:2,alignItems:"center",children:[Object(r.jsx)(P.a,{children:"AR"}),Object(r.jsx)(P.a,{children:parseFloat(t.balance).toLocaleString(void 0,{maximumFractionDigits:6})}),Object(r.jsx)(y.a,{isDisabled:!t.key,onClick:function(){return u(!0)},children:"Send"})]}),Object(r.jsx)(ke.a,{my:4}),Object(r.jsx)(f.a,{align:"center",size:"sm",children:"Profit Sharing Tokens"}),Object(r.jsxs)(ye.a,{placeholder:"Filtering options",value:ue,onChange:function(e){return le(e.target.value)},children:[Object(r.jsx)("option",{value:"all",children:"All tokens"}),Object(r.jsx)("option",{value:"balances",children:"Tokens with balances"}),Object(r.jsx)("option",{value:"distribution",children:"Number of active wallets"})]}),Object(r.jsxs)(ge.a,{columns:4,children:[Object(r.jsx)(P.a,{fontWeight:"bold",minWidth:"150px",children:"Ticker"}),Object(r.jsx)(P.a,{fontWeight:"bold",children:"Balance"})]}),_&&Object(r.jsx)(we.a,{h:"200px",children:Object(r.jsxs)(j.a,{align:"center",children:[Object(r.jsx)(p.a,{pb:"10px"}),Object(r.jsx)(P.a,{children:"Loading tokens..."})]})}),ae.map((function(e){if(e&&e.ticker)return Object(r.jsxs)(ge.a,{borderY:"1px",borderColor:"lightgray",columns:4,my:2,py:1,alignItems:"center",children:[Object(r.jsx)(P.a,{minWidth:"150px",onClick:function(){Z(Object(A.a)(Object(A.a)({},e.contractState),{},{contractID:e.contract})),H(!0)},children:e.ticker}),Object(r.jsx)(P.a,{minWidth:"120px",onClick:function(){Z(Object(A.a)(Object(A.a)({},e.contractState),{},{contractID:e.contract})),H(!0)},children:e.contractState.balances[t.address]}),Object(r.jsx)(Se.a,{closeOnBlur:!1,children:function(n){var a=n.onClose;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Se.g,{children:Object(r.jsx)(y.a,{justifySelf:"end",children:"Send"})}),Object(r.jsxs)(Se.e,{zIndex:4,children:[Object(r.jsx)(Se.b,{}),Object(r.jsx)(Se.f,{children:"Send Tokens"}),Object(r.jsx)(Se.d,{}),Object(r.jsx)(Se.c,{children:Object(r.jsx)(d.b,{align:"center",children:$?Object(r.jsxs)(j.a,{children:[Object(r.jsx)(p.a,{}),Object(r.jsx)(P.a,{children:"Submitting Transaction"})]}):Object(r.jsxs)(j.a,{children:[Object(r.jsx)(F.a,{my:2,placeholder:"Amount",onChange:function(e){w(parseFloat(e.target.value))}}),Object(r.jsx)(F.a,{placeholder:"Address",onChange:function(e){m(e.target.value)}}),Object(r.jsxs)(P.a,{textAlign:"center",children:["Fee: ",E]}),Object(r.jsx)(y.a,{isDisabled:!t.key,w:"90%",onClick:function(){de(e,a)},children:"Submit Transaction"})]})})})]})]})}}),Object(r.jsx)(Te.a,{justifySelf:"end",as:h.b,onClick:function(){Z(Object(A.a)(Object(A.a)({},e.contractState),{},{contractID:e.contract})),H(!0)}})]},e.contract+"grid")})),Object(r.jsx)(Ot,{props:{modal:i,closeModal:function(){return u(!1)}}}),Object(r.jsx)(Se.a,{placement:"top-end",children:function(e){var t=e.onClose;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Se.g,{children:Object(r.jsx)(y.a,{position:"fixed",bottom:"50px",left:"20px",children:"Add Custom Token"})}),Object(r.jsxs)(Se.e,{children:[Object(r.jsx)(Se.d,{}),Object(r.jsx)(Se.c,{children:Object(r.jsx)(gt,{close:t})})]})]})}}),Object(r.jsx)(ht,{isOpen:U,close:function(){return H(!1)},contractState:Q})]})},yt=n(159),wt=function(e){var t=e.tags,n=e.clickHandler,a=c.a.useState(""),s=Object(o.a)(a,2),i=s[0],u=s[1],l=c.a.useState(""),b=Object(o.a)(l,2),p=b[0],j=b[1];return Object(r.jsxs)(d.b,{children:[Object(r.jsx)(f.a,{size:"sm",children:"Transacion Tags"}),t.map((function(e){return Object(r.jsxs)(ge.a,{columns:2,fontSize:12,children:[Object(r.jsxs)(P.a,{children:["Name: ",e.name]}),Object(r.jsxs)(P.a,{children:["Value: ",e.value]})]},e.name+e.value)})),Object(r.jsx)(F.a,{placeholder:"Name",value:i,onChange:function(e){return u(e.target.value)}}),Object(r.jsx)(F.a,{placeholder:"Value",value:p,onChange:function(e){return j(e.target.value)}}),Object(r.jsx)(y.a,{isDisabled:""===i||""===p,onClick:function(){n(i,p),u(""),j("")},children:"Add Tag"})]})},St=function(e){var t=e.isOpen,n=e.close,a=c.a.useContext(S),s=a.state,i=a.dispatch,u=Object(N.a)(),l=c.a.useState(null),f=Object(o.a)(l,2),b=f[0],x=f[1],h=c.a.useState([]),v=Object(o.a)(h,2),m=v[0],g=v[1],k=c.a.useState("0"),w=Object(o.a)(k,2),T=w[0],C=w[1],E=c.a.useState(!1),F=Object(o.a)(E,2),q=F[0],R=F[1];c.a.useEffect((function(){s.picture&&fetch(s.picture).then((function(e){return e.blob()})).then((function(e){W([e]),i({type:"SET_PICTURE",payload:{picture:""}})}))}),[s.picture]);var M=function(){x(null),g([]),n()},$=function(){var e=Object(D.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,re(b,s.key,m);case 3:(t=e.sent).startsWith("Transaction")?u({title:"Success",status:"success",duration:3e3,position:"bottom",description:"Your file has been submitted to the blockchain"}):u({title:"Error submitting transaction",status:"error",duration:3e3,position:"bottom",description:t}),setTimeout((function(){R(!1),M()}),1e3);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(D.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new FileReader).onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=function(){var e=Object(D.a)(I.a.mark((function e(n){var r,a,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.target){e.next=9;break}return r=t[0],a=[{name:"App-Name",value:"ArMob 2.0"},{name:"Content-Type",value:t[0].type}],e.next=5,ee(t[0].size);case 5:c=e.sent,C(c),x(r),g(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();try{n.readAsText(t[0])}catch(r){console.log("Unable to process file",r),u({title:"Error processing file",status:"error",duration:3e3,position:"bottom",description:"Please try again"})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(Ce.a,{isOpen:t,placement:"right",onClose:n,size:"full",children:[Object(r.jsx)(O.h,{}),Object(r.jsxs)(Ce.b,{children:[Object(r.jsx)(O.c,{onClick:M}),Object(r.jsx)(O.g,{children:"Upload file to Arweave"}),Object(r.jsxs)(O.b,{children:[!b&&Object(r.jsx)(j.a,{w:"100%",borderStyle:"dashed",borderWidth:"2px",children:Object(r.jsx)(yt.a,{onDrop:W,children:function(e){var t=e.getRootProps,n=e.getInputProps;return Object(r.jsx)("section",{children:Object(r.jsxs)("div",Object(A.a)(Object(A.a)({},t()),{},{children:[Object(r.jsx)("input",Object(A.a)({},n())),Object(r.jsx)(j.a,{flexDirection:"row",padding:3,children:Object(r.jsx)(P.a,{fontSize:14,textAlign:"center",children:"Drop a file or click to select from system file picker"})})]}))})}})}),b&&!q&&Object(r.jsxs)(d.b,{children:[Object(r.jsxs)(P.a,{children:["Fee: ",T," AR"]}),Object(r.jsx)(wt,{tags:m,clickHandler:function(e,t){if(void 0!==m){var n=[].concat(Object(je.a)(m),[{name:e,value:t}]);g(n)}else g([{name:e,value:t}])}})]}),b&&q&&Object(r.jsx)(p.a,{position:"absolute",top:"50%",left:"50%"})]}),Object(r.jsxs)(O.f,{mb:{base:"25%",sm:"25%",md:"25%",lg:0,xl:0},children:[Object(r.jsx)(y.a,{variant:"outline",onClick:M,mr:3,children:"Cancel"}),Object(r.jsx)(y.a,{color:"blue",isDisabled:!b,onClick:$,children:"Upload File"})]})]})]})},Tt=function(){var e=c.a.useContext(S).state,t=c.a.useState(!1),n=Object(o.a)(t,2),a=n[0],s=n[1],i=c.a.useState([]),u=Object(o.a)(i,2),l=u[0],b=u[1],x=c.a.useState(""),v=Object(o.a)(x,2),m=v[0],O=v[1],g=c.a.useState(""),w=Object(o.a)(g,2),T=w[0],C=w[1],A=c.a.useState("from"),E=Object(o.a)(A,2),q=E[0],R=E[1];c.a.useEffect((function(){function t(){return(t=Object(D.a)(I.a.mark((function t(){var n,r,a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s(!0),t.t0=q,t.next="from"===t.t0?4:"to"===t.t0?9:14;break;case 4:return t.next=6,Z({address:e.address});case 6:return n=t.sent,b(n),t.abrupt("break",18);case 9:return t.next=11,Z({to:e.address});case 11:return r=t.sent,b(r),t.abrupt("break",18);case 14:return t.next=16,Z({address:e.address});case 16:a=t.sent,b(a);case 18:s(!1);case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}""!==e.address?function(){t.apply(this,arguments)}():b([])}),[e.address,q]);var M=function(){var t=Object(D.a)(I.a.mark((function t(){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.next=3,Z({address:e.address,name:m,value:T});case 3:n=t.sent,b(n),s(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=Object(D.a)(I.a.mark((function t(){var n,r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s(!0),n=l[l.length-1].cursor,"from"!==q){t.next=8;break}return t.next=5,Z({address:e.address,cursor:n});case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,Z({to:e.address,cursor:n});case 10:r=t.sent;case 11:b(r),s(!1);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.jsxs)(j.a,{h:"100%",children:[Object(r.jsx)(z.a,{onChange:function(e){return R(e.toString())},value:q,defaultValue:"from",children:Object(r.jsxs)(d.b,{direction:"row",spacing:4,children:[Object(r.jsx)(L.a,{defaultChecked:!0,value:"from",children:"From Wallet"}),Object(r.jsx)(L.a,{value:"to",children:"To Wallet"})]})}),a?Object(r.jsx)(p.a,{position:"fixed",bottom:"50%",right:"50%"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(W.a,{allowToggle:!0,allowMultiple:!0,w:"100%",children:l.length>0?l.map((function(e){return function(e){return Object(r.jsxs)(W.d,{textAlign:"left",children:[Object(r.jsxs)(W.b,{bg:"white",border:"1px",borderColor:"grey",children:[Object(r.jsxs)(P.a,{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:["ID: ",e.node.id]},e.node.id+"display"),Object(r.jsx)(W.c,{})]},e.node.id+"button"),Object(r.jsxs)(W.e,{border:"1px",children:[Object(r.jsx)(f.a,{size:"xs",fontSize:"12px",children:"Metadata"}),Object(r.jsxs)(ge.a,{columns:2,children:[Object(r.jsx)(P.a,{fontSize:10,children:"Fee: "}),Object(r.jsxs)(P.a,{fontSize:10,children:[e.node.fee.ar," AR"]}),e.node.recipient&&Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(P.a,{fontSize:10,children:"Recipient: "}),Object(r.jsx)(P.a,{fontSize:10,children:e.node.recipient}),Object(r.jsx)(P.a,{fontSize:10,children:"Amount: "}),Object(r.jsxs)(P.a,{fontSize:10,children:[e.node.quantity.ar," AR"]})]}),e.node.owner&&Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)(P.a,{fontSize:10,children:"From: "}),Object(r.jsx)(P.a,{fontSize:10,children:e.node.owner.address}),Object(r.jsx)(P.a,{fontSize:10,children:"Amount: "}),Object(r.jsxs)(P.a,{fontSize:10,children:[e.node.quantity.ar," AR"]})]})]}),e.node.tags.length>0&&Object(r.jsx)(f.a,{size:"xs",fontSize:"12px",children:"Transaction Tags"}),e.node.tags.map((function(t){return Object(r.jsxs)(ge.a,{columns:2,textAlign:"left",overflow:"auto",children:[Object(r.jsx)(P.a,{fontSize:10,children:t.name},t.toString()),Object(r.jsx)(P.a,{fontSize:10,children:t.value},t.name+t.value)]},e.node.id+t.name)}))]})]},e.node.id)}(e)})):null}),Object(r.jsx)(y.a,{my:2,isDisabled:l.length<10,leftIcon:Object(r.jsx)(h.b,{}),onClick:function(){return N()},children:"Next 10"}),Object(r.jsxs)(Se.a,{children:[Object(r.jsx)(Se.g,{children:Object(r.jsx)(k.a,{position:"fixed",bottom:"6%",left:"5%","aria-label":"search transactions",icon:Object(r.jsx)(h.h,{})})}),Object(r.jsx)(Se.e,{children:Object(r.jsxs)(d.b,{children:[Object(r.jsx)(F.a,{placeholder:"Name",value:m,onChange:function(e){return O(e.target.value)}}),Object(r.jsx)(F.a,{placeholder:"Value",value:T,onChange:function(e){return C(e.target.value)}}),Object(r.jsx)(y.a,{isDisabled:""===m||""===T,onClick:function(){M(),O(""),C("")},children:"Search by Tag"})]})})]})]})]})},Ct=n(827),At=n(831),Et=n(828),It=n(225),Dt=function(){var e=Object(N.a)(),t=c.a.useContext(S),n=t.state,a=t.dispatch,s=c.a.useState(!1),i=Object(o.a)(s,2),u=i[0],l=i[1],b=c.a.useState(""),p=Object(o.a)(b,2),v=p[0],m=p[1],O=c.a.useState(""),g=Object(o.a)(O,2),k=g[0],w=g[1],T=Object(Ct.a)(k).onCopy,C=function(){var t=Object(D.a)(I.a.mark((function t(r){var c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(c=new FileReader).onabort=function(){return console.log("file reading was aborted")},c.onerror=function(){return console.log("file reading has failed")},c.onload=function(){var t=Object(D.a)(I.a.mark((function t(c){var s,i;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l(!0),"application/json"!==r[0].type){t.next=19;break}return t.prev=2,s=JSON.parse(c.target.result),t.next=6,Q(s);case 6:return i=t.sent,t.next=9,Object(x.b)("wallet",JSON.stringify(s));case 9:a({type:"ADD_WALLET",payload:Object(A.a)(Object(A.a)({},i),{},{key:s,mnemonic:s.mnemonic})}),Object(x.b)("wallets",JSON.stringify(n)),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.log("Invalid json in wallet file"),e({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid JSON in wallet file"});case 17:t.next=21;break;case 19:console.log("Invalid file type"),e({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid file type"});case 21:l(!1);case 22:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}();try{c.readAsText(r[0])}catch(s){console.log("Invalid file type"),e({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid file type"})}case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(){var e=Object(D.a)(I.a.mark((function e(t){var r,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,Object(It.getKeyFromMnemonic)(t);case 3:return r=e.sent,e.next=6,Q(r);case 6:return c=e.sent,e.next=9,Object(x.b)("wallet",JSON.stringify(r));case 9:l(!1),a({type:"ADD_WALLET",payload:Object(A.a)(Object(A.a)({},c),{},{key:r,mnemonic:t})}),Object(x.b)("wallets",JSON.stringify(n));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(D.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,Object(It.generateMnemonic)();case 3:t=e.sent,m(t),E(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(D.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,Q(v);case 3:t=e.sent,a({type:"ADD_WALLET",payload:Object(A.a)(Object(A.a)({},t),{},{key:""})}),Object(x.b)("wallets",JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(D.a)(I.a.mark((function e(t){var n,r,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Blob([JSON.stringify(Object(A.a)(Object(A.a)({},t.key),{},{mnemonic:t.mnemonic}),null,2)],{type:"application/json"}),e.next=3,URL.createObjectURL(n);case 3:r=e.sent,(a=document.createElement("a")).href=r,a.download="arweave-keyfile-".concat(t.address,".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(D.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:n=e.sent,a({type:"CHANGE_ACTIVE_WALLET",payload:{address:n.address,balance:n.balance}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(d.b,{align:"center",children:[Object(r.jsxs)(At.a,{isLoaded:!u,children:[Object(r.jsx)(j.a,{w:"100%",borderStyle:"dashed",borderWidth:"2px",mb:2,children:Object(r.jsx)(yt.a,{onDrop:C,children:function(e){var t=e.getRootProps,n=e.getInputProps;return Object(r.jsx)("section",{children:Object(r.jsxs)("div",Object(A.a)(Object(A.a)({},t()),{},{children:[Object(r.jsx)("input",Object(A.a)({},n())),Object(r.jsx)(j.a,{flexDirection:"row",padding:3,children:Object(r.jsx)(P.a,{fontSize:14,textAlign:"center",children:"Drop a wallet file or click to load wallet"})})]}))})}})}),Object(r.jsxs)(d.b,{w:"100%",mb:2,children:[Object(r.jsx)(f.a,{size:"xs",children:"Wallet mnemonic"}),Object(r.jsx)(F.a,{w:"93%%",placeholder:"Enter 12 word seedphrase",onChange:function(e){m(e.target.value)}}),Object(r.jsx)(y.a,{isDisabled:""===v,onClick:function(){return E(v)},children:"Load Wallet"})]}),Object(r.jsxs)(d.b,{w:"100%",children:[Object(r.jsx)(f.a,{size:"xs",children:"Track a Wallet"}),Object(r.jsx)(F.a,{w:"93%%",placeholder:"Enter a wallet address",onChange:function(e){m(e.target.value)}}),Object(r.jsx)(y.a,{isDisabled:""===v,onClick:function(){return R()},children:"Track Address"}),Object(r.jsx)(y.a,{mt:2,onClick:q,children:"Generate New Wallet"})]})]}),n.address&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ke.a,{}),Object(r.jsx)(f.a,{size:"sm",children:"Loaded Wallets"})]}),n.wallets.length>0&&n.wallets.map((function(e){return console.log(e),Object(r.jsx)(d.b,{isInline:!0,align:"start",children:Object(r.jsxs)(Se.a,{children:[Object(r.jsx)(Se.g,{children:Object(r.jsx)(P.a,{whiteSpace:"nowrap",overflow:"hidden",maxWidth:"90vw",textOverflow:"ellipsis",cursor:"pointer",children:e.address})}),Object(r.jsxs)(Se.e,{children:[Object(r.jsx)(Se.b,{}),Object(r.jsx)(Se.c,{children:Object(r.jsxs)(d.b,{isInline:!0,justifyContent:"space-around",children:[Object(r.jsxs)(Et.a,{direction:"column",align:"center",justify:"center",as:"button",onClick:function(){$(e.address)},alignContent:"start",children:[Object(r.jsx)(h.c,{size:16}),Object(r.jsx)(P.a,{children:"Use"})]},e.address+"pseudo2"),Object(r.jsxs)(Et.a,{as:"button",direction:"column",align:"center",justify:"center",onClick:function(){a({type:"REMOVE_WALLET",payload:{address:e.address}})},children:[Object(r.jsx)(h.i,{size:16}),Object(r.jsx)(P.a,{children:"Remove"})]}),Object(r.jsxs)(Et.a,{as:"button",direction:"column",align:"center",justify:"center",onClick:function(){return M(e)},children:[Object(r.jsx)(h.e,{size:16}),Object(r.jsx)(P.a,{children:"Download Keyfile"})]}),e.mnemonic&&Object(r.jsxs)(Et.a,{as:"button",direction:"column",align:"center",justify:"center",onClick:function(){e.mnemonic&&w(e.mnemonic),T()},children:[Object(r.jsx)(h.d,{size:16}),Object(r.jsx)(P.a,{children:"Copy Seedphrase"})]})]})})]})]})})}))]})},Ft=function(e,t){switch(console.log("Current state is:"),console.log(e),console.log("Action requested is:"),console.log(t),t.type){case"LOAD_STATE":return Object(A.a)({},t.payload.state);case"ADD_WALLET":var n,r=null===(n=e.wallets)||void 0===n?void 0:n.filter((function(e){return e.address===t.payload.address})),a=e.wallets?e.wallets:[];return r&&0===r.length&&(null===a||void 0===a||a.push({address:t.payload.address,key:t.payload.key,mnemonic:t.payload.mnemonic})),Object(A.a)(Object(A.a)({},e),{},{key:t.payload.key,balance:t.payload.balance,address:t.payload.address,mnemonic:t.payload.mnemonic,wallets:a});case"UPDATE_TOKENS":return Object(A.a)(Object(A.a)({},e),{},{tokens:t.payload.tokens});case"SET_PICTURE":return Object(A.a)(Object(A.a)({},e),{},{picture:t.payload.picture});case"SET_BLOCK_HEIGHT":return Object(A.a)(Object(A.a)({},e),{},{blockHeight:t.payload.blockHeight});case"SET_TOKEN_ADDRESSES":return Object(A.a)(Object(A.a)({},e),{},{tokenAddresses:t.payload.tokenAddresses});case"CHANGE_ACTIVE_WALLET":var c=e.wallets.find((function(e){return e.address===t.payload.address}));return Object(A.a)(Object(A.a)({},e),{},{address:t.payload.address,key:null===c||void 0===c?void 0:c.key,balance:t.payload.balance,mnemonic:null===c||void 0===c?void 0:c.mnemonic});case"REMOVE_WALLET":var s,i,o=e.wallets.filter((function(e){return e.address!==t.payload.address}));return o.length>0?Object(A.a)(Object(A.a)({},e),{},{wallets:o,address:null===(s=o[0])||void 0===s?void 0:s.address,key:null===(i=o[0])||void 0===i?void 0:i.key}):Object(A.a)(Object(A.a)({},e),{},{wallets:[],address:"",key:"",balance:""});default:return e}};var qt=function(){var e=c.a.useReducer(Ft,w),t=Object(o.a)(e,2),n=t[0],a=t[1],s=c.a.useState(!1),i=Object(o.a)(s,2),v=i[0],m=i[1],O=c.a.useState(!1),g=Object(o.a)(O,2),k=g[0],y=g[1],T=c.a.useState(!0),A=Object(o.a)(T,2),E=A[0],I=A[1],D=function(e){"txn"===e&&m(!1),"camera"===e&&y(!1)};return c.a.useEffect((function(){G().then((function(e){return a({type:"SET_BLOCK_HEIGHT",payload:{blockHeight:e}})}))}),[]),c.a.useEffect((function(){Object(x.a)("wallets").then((function(e){if(e){var t=JSON.parse(e);a({type:"LOAD_STATE",payload:{state:t}})}I(!1)}))}),[]),Object(r.jsx)(S.Provider,{value:{dispatch:a,state:n},children:Object(r.jsxs)(u.a,{theme:l.b,children:[Object(r.jsxs)(d.b,{w:"100%",align:"center",children:[Object(r.jsx)(f.a,{children:"ArMob 2.0"}),Object(r.jsxs)(b.e,{isFitted:!0,align:"center",variant:"enclosed-colored",children:[Object(r.jsxs)(b.d,{w:"90vw",children:[Object(r.jsx)(b.c,{children:Object(r.jsx)(Dt,{})}),Object(r.jsx)(b.c,{children:E?Object(r.jsx)(p.a,{position:"fixed",bottom:"50%",right:"50%"}):""!==n.address&&Object(r.jsx)(j.a,{children:Object(r.jsx)(kt,{})})}),Object(r.jsx)(b.c,{children:""!==n.address&&Object(r.jsx)(Tt,{})}),Object(r.jsx)(b.c,{children:Object(r.jsx)(de,{})})]}),Object(r.jsxs)(b.b,{position:"fixed",bottom:"0px",left:"0px",w:"100vw",children:[Object(r.jsx)(b.a,{children:"Wallet"}),Object(r.jsx)(b.a,{isDisabled:""===n.address,children:"Tokens"}),Object(r.jsx)(b.a,{isDisabled:""===n.address,children:"Transactions"}),Object(r.jsx)(b.a,{isDisabled:""===n.key,children:"Smartweave"})]})]})]}),n.key&&Object(r.jsxs)(pe,{children:[n.key&&Object(r.jsx)(be,{icon:Object(r.jsx)(h.j,{}),label:"Upload File",clickHandler:function(){return m(!0)}},"faupload"),n.key&&Object(r.jsx)(be,{icon:Object(r.jsx)(h.a,{}),label:"Take Picture",clickHandler:function(){return y(!0)}},"facameretro")]}),Object(r.jsx)(St,{isOpen:v,close:function(){return D("txn")}}),Object(r.jsx)(C,{isOpen:k,close:function(){return D("camera")},setTxnOpen:function(){return m(!0)}})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Rt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,838)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(qt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Rt()}},[[792,1,2]]]);
//# sourceMappingURL=main.0129a58f.chunk.js.map