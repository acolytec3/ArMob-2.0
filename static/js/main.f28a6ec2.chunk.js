(this.webpackJsonparmobv2=this.webpackJsonparmobv2||[]).push([[0],{112:function(e,n,t){},188:function(e,n,t){"use strict";t.r(n);var a=t(3),r=t(0),c=t.n(r),o=t(38),s=t.n(o),i=(t(112),t(22)),l=t(18),d=t(195),u=t(192),j=t(191),f=t(196),b=t(6),p=t(5),h=t.n(p),x=t(26),O=t(30),v=t(106),w=t(193),g=t(45),y=t(68),k=t.n(y),m=t(52),A=t.n(m),E=t(101),S=function(){var e=Object(O.a)(h.a.mark((function e(n){var t,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.a.init({host:"arweave.net",port:443}),e.next=3,t.wallets.jwkToAddress(n);case 3:return a=e.sent,e.t0=t.ar,e.next=7,t.wallets.getBalance(a);case 7:return e.t1=e.sent,r=e.t0.winstonToAr.call(e.t0,e.t1),console.log(a),console.log(r),e.abrupt("return",{address:a,balance:r});case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=Object(O.a)(h.a.mark((function e(n){var t,a,r,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.a.init({host:"arweave.net",port:443}),e.next=3,A.a.post("https://arweave.net/graphql",{query:'query {\n      transactions(first:20,\n          owners:["bLkyTRJCYg8WxBKrjBwAaRe1H7HYDfXzl7YKCENvw-Q"],\n          tags: [{\n              name: "Exchange",\n            values:["Verto"]\n          }, {name:"Type", values:["Buy", "Sell"]}]\n      ) {\n          edges {\n              node {\n                  id\n                  tags {\n                    name\n                    value\n                  }\n              }\n          }\n      }\n  }'});case 3:return a=e.sent,r=a.data.data.transactions.edges,c=r.map((function(e){return e.node.tags.filter((function(e){return"Token"==e.name}))[0].value})),console.log(c),e.next=9,Promise.all(c.map((function(e){return Object(E.readContract)(t,e).then((function(e){return{balance:e.balances["bLkyTRJCYg8WxBKrjBwAaRe1H7HYDfXzl7YKCENvw-Q"],ticker:e.ticker}}))})));case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),W={key:{},balance:"",address:""},L=Object(r.createContext)({state:W,dispatch:function(){return null}}),T=function(){var e=Object(w.a)(),n=c.a.useContext(L),t=n.state,r=n.dispatch;c.a.useEffect((function(){var e=function(){var e=Object(O.a)(h.a.mark((function e(n){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(n),console.log(JSON.parse(n)),e.next=4,S(t);case 4:a=e.sent,r({type:"ADD_WALLET",payload:Object(x.a)(Object(x.a)({},a),{},{key:t})});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();Object(g.b)("wallet").then((function(n){if(n)try{e(n)}catch(t){console.log("Error loading wallet",t)}}))}),[]);var o=function(){var n=Object(O.a)(h.a.mark((function n(a){var c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(c=new FileReader).onabort=function(){return console.log("file reading was aborted")},c.onerror=function(){return console.log("file reading has failed")},c.onload=function(){var n=Object(O.a)(h.a.mark((function n(c){var o,s,i;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("application/json"!==a[0].type){n.next=20;break}return n.prev=1,o=JSON.parse(c.target.result),n.next=5,S(o);case 5:return s=n.sent,n.next=8,C(t.address);case 8:return i=n.sent,n.next=11,Object(g.c)("wallet",JSON.stringify(o));case 11:r({type:"ADD_WALLET",payload:Object(x.a)(Object(x.a)({},s),{},{key:o,tokens:i})}),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(1),console.log("Invalid json in wallet file"),e({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid JSON in wallet file"});case 18:n.next=22;break;case 20:console.log("Invalid file type"),e({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid file type"});case 22:case"end":return n.stop()}}),n,null,[[1,14]])})));return function(e){return n.apply(this,arguments)}}();try{c.readAsText(a[0])}catch(o){console.log("Invalid file type"),e({title:"Error loading wallet",status:"error",duration:3e3,position:"bottom-left",description:"Invalid file type"})}case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(a.jsx)(b.a,{children:""===t.address?Object(a.jsx)(b.a,{w:"100%",borderStyle:"dashed",borderWidth:"2px",children:Object(a.jsx)(v.a,{onDrop:o,children:function(e){var n=e.getRootProps,t=e.getInputProps;return Object(a.jsx)("section",{children:Object(a.jsxs)("div",Object(x.a)(Object(x.a)({},n()),{},{children:[Object(a.jsx)("input",Object(x.a)({},t())),Object(a.jsx)(b.a,{flexDirection:"row",padding:3,children:Object(a.jsx)(j.a,{fontSize:14,textAlign:"center",children:"Drop a wallet file or click to load wallet"})})]}))})}})}):Object(a.jsxs)(u.a,{isInline:!0,children:[Object(a.jsx)(j.a,{children:t.address}),Object(a.jsxs)(j.a,{children:[parseFloat(t.balance).toFixed(4).toLocaleString()," AR"]})]})})},D=function(e,n){switch(console.log("Current state is:",e),console.log("Action requested is:",n),n.type){case"ADD_WALLET":return Object(x.a)(Object(x.a)({},e),{},{key:n.payload.key,balance:n.payload.balance,address:n.payload.address,tokens:n.payload.tokens});default:return e}},I=function(){var e=c.a.useContext(L).state,n=c.a.useState([]),t=Object(i.a)(n,2),r=t[0],o=t[1];return console.log(e.address),c.a.useEffect((function(){A.a.post("https://arweave.net/graphql",{query:'query {\n                transactions(owners:  ["'.concat(e.address,'"]) {\n                  edges {\n                    node {\n                      id\n                      owner {\n                        address\n                      }\n                      recipient\n                      tags {\n                        name\n                        value\n                      }\n                      fee {\n                        winston\n                        ar\n                      }\n                      quantity {\n                        winston\n                        ar\n                      }\n                    }\n                  }\n                }\n              }')}).then((function(e){console.log(e.data),o(e.data.data.transactions.edges)})).catch((function(e){return console.log(e)}))}),[]),Object(a.jsx)(b.a,{children:r.length>0?r.map((function(e){return function(e){return Object(a.jsxs)(u.a,{isInline:!0,children:[Object(a.jsxs)(j.a,{children:["ID: ",e.node.id]}),Object(a.jsxs)(j.a,{children:["Owner: ",e.node.owner.address]})]})}(e)})):null})},B=t(58),R=t(69),J=t(194),N=function(){var e=c.a.useContext(L),n=e.state,t=e.dispatch;return Object(a.jsxs)(u.a,{isInline:!0,position:"fixed",bottom:"40px",right:"0px",align:"center",children:[Object(a.jsx)(j.a,{fontSize:11,children:""===n.address?"Open Wallet":"Close Wallet"}),Object(a.jsx)(J.a,{"aria-label":"wallet",icon:B.c,isRound:!0,onClick:Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===n.address){e.next=4;break}return e.next=3,Object(g.a)("wallet");case 3:t({type:"ADD_WALLET",payload:{address:"",balance:"",key:""}});case 4:case"end":return e.stop()}}),e)})))})]},"me")},q=function(){var e,n=c.a.useState(!1),t=Object(i.a)(n,2),r=t[0],o=t[1],s=c.a.useRef(null);return e=s,c.a.useEffect((function(){function n(n){e.current&&!e.current.contains(n.target)&&o(!1)}return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[e]),Object(a.jsxs)("div",{ref:s,style:{position:"fixed",bottom:"20px",right:"20px"},children:[Object(a.jsx)(J.a,{"aria-label":"open",isRound:!0,icon:r?B.a:B.b,onClick:function(){return o(!r)}}),Object(a.jsx)(R.a,{children:r&&Object(a.jsx)(R.b.div,{initial:{opacity:0},animate:{y:-20,opacity:1},exit:{y:20,opacity:0},children:Object(a.jsx)(N,{})})})]})},F=t(197),P=function(){var e=c.a.useContext(L).state;return Object(a.jsxs)(b.a,{children:[Object(a.jsxs)(F.a,{columns:2,children:[Object(a.jsx)(j.a,{children:"Ticker"}),Object(a.jsx)(j.a,{children:"Balance"})]}),e.tokens.map((function(e){return Object(a.jsxs)(F.a,{columns:2,children:[Object(a.jsx)(j.a,{children:e.ticker}),Object(a.jsx)(j.a,{children:e.balance})]})}))]})};var Y=function(){var e=c.a.useReducer(D,W),n=Object(i.a)(e,2),t=n[0],r=n[1];return Object(a.jsx)(L.Provider,{value:{dispatch:r,state:t},children:Object(a.jsxs)(l.a,{theme:d.a,children:[Object(a.jsxs)(u.a,{w:"100%",align:"center",children:[Object(a.jsxs)(u.a,{isInline:!0,children:[Object(a.jsx)(j.a,{children:"Armob V2"}),""!==t.balance&&Object(a.jsxs)(j.a,{justifySelf:"end",children:["Balance: ",t.balance]})]}),Object(a.jsxs)(f.f,{isFitted:!0,align:"center",children:[Object(a.jsxs)(f.e,{children:[Object(a.jsx)(f.d,{children:""===t.address?Object(a.jsx)(T,{}):Object(a.jsxs)(b.a,{children:[Object(a.jsx)(P,{}),Object(a.jsx)(I,{})]})}),Object(a.jsx)(f.d,{children:Object(a.jsx)(j.a,{children:"Browser"})})]}),Object(a.jsxs)(f.c,{position:"fixed",bottom:"0px",left:"0px",w:"100vw",children:[Object(a.jsx)(f.a,{children:"Wallet"}),Object(a.jsx)(f.a,{children:"Browser"})]})]})]}),Object(a.jsx)(q,{})]})})},z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var K=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,198)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),a(e),r(e),c(e),o(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(Y,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat(".","/service-worker.js");z?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):H(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):H(n,e)}))}}(),K()}},[[188,1,2]]]);
//# sourceMappingURL=main.f28a6ec2.chunk.js.map